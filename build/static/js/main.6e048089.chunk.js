(this["webpackJsonpreact-hexapod-sim"]=this["webpackJsonpreact-hexapod-sim"]||[]).push([[0],{144:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(46),r=a.n(o),s=(a(58),a(2)),l=a(5),c=a(3),u=a(6),h=a(10),d=a(9),m=a(7),g=a(26),f=["bodyContactPoint","coxiaPoint","femurPoint","footTipPoint"],p={rightMiddle:0,rightFront:1,leftFront:2,leftMiddle:3,leftBack:4,rightBack:5},b=["rightMiddle","rightFront","leftFront","leftMiddle","leftBack","rightBack"],v=120,y={rightMiddle:0,rightFront:45,leftFront:135,leftMiddle:180,leftBack:225,rightBack:315},x={rightMiddle:!1,rightFront:!1,rightBack:!1,leftFront:!0,leftMiddle:!0,leftBack:!0},w=function(){function e(t,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"no-name-point",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"no-id-point";Object(c.a)(this,e),this.x=t,this.y=a,this.z=n,this.name=i,this.id=o}return Object(u.a)(e,[{key:"newTrot",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed-point",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"no-id",i=t.slice(0,3),o=Object(l.a)(i,3),r=o[0],s=o[1],c=o[2],u=Object(l.a)(r,4),h=u[0],d=u[1],m=u[2],g=u[3],f=Object(l.a)(s,4),p=f[0],b=f[1],v=f[2],y=f[3],x=Object(l.a)(c,4),w=x[0],P=x[1],O=x[2],k=x[3],S=this.x*h+this.y*d+this.z*m+g,j=this.x*p+this.y*b+this.z*v+y,E=this.x*w+this.y*P+this.z*O+k;return new e(S,j,E,a,n)}},{key:"cloneTrot",value:function(e){return this.newTrot(e,this.name,this.id)}},{key:"cloneShift",value:function(t,a,n){return new e(this.x+t,this.y+a,this.z+n,this.name,this.id)}},{key:"cloneTrotShift",value:function(e,t,a,n){return this.cloneTrot(e).cloneShift(t,a,n)}},{key:"toMarkdownString",value:function(){var e=this.x.toFixed(2),t=this.y.toFixed(2),a=this.z.toFixed(2);return"".concat(this.name,"\n\n(x: ").concat(e,", y: ").concat(t,", z: ").concat(a,")")}}]),e}(),P=function(e){return 180*e/Math.PI},O=function(e){return e*Math.PI/180},k=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},S=function(e){return Math.sqrt(k(e,e))},j=function(e,t,a){return k(e,z(t,a))>0},E=function(e,t){return new w(t.x-e.x,t.y-e.y,t.z-e.z)},T=function(e,t){return new w(t*e.x,t*e.y,t*e.z)},z=function(e,t){var a=e.y*t.z-e.z*t.y,n=e.z*t.x-e.x*t.z,i=e.x*t.y-e.y*t.x;return new w(a,n,i)},F=function(e,t,a){var n=E(e,t),i=E(e,a),o=z(n,i),r=S(o);return T(o,1/r)},M=function(e){var t=Math.acos(e);return isNaN(t)?0:P(t)},N=function(e,t,a){return 0===e||0===t?null:M((e*e+t*t-a*a)/(2*e*t))},C=function(e,t){if(0===S(e)||0===S(t))return 0;var a=k(e,t)/Math.sqrt(k(e,e)*k(t,t));return M(a)},A=function(e){return[Math.sin(O(e)),Math.cos(O(e))]},L=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],V=function(e){var t=[e,e,e,e];return[t.slice(),t.slice(),t.slice(),t.slice()]},_=function(e,t){return e+t},G=function(e,t){return e*t},B=function(e,t,a){for(var n=V(null),i=0;i<4;i++)for(var o=0;o<4;o++)n[i][o]=a.call(null,e[i][o],t[i][o]);return n},W=function(e,t){return B(e,t,_)},D=function(e,t){for(var a=V(null),n=0;n<4;n++)for(var i=0;i<4;i++)a[n][i]=e[n][0]*t[0][i]+e[n][1]*t[1][i]+e[n][2]*t[2][i]+e[n][3]*t[3][i];return a};function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=A(e),o=Object(l.a)(i,2),r=o[0],s=o[1];return[[s,0,r,t],[0,1,0,a],[-r,0,s,n],[0,0,0,1]]}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=A(e),o=Object(l.a)(i,2),r=o[0],s=o[1];return[[s,-r,0,t],[r,s,0,a],[0,0,1,n],[0,0,0,1]]}var U=function(e,t,a){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=A(e),o=Object(l.a)(i,2),r=o[0],s=o[1];return[[1,0,0,t],[0,s,-r,a],[0,r,s,n],[0,0,0,1]]}(e),i=I(t),o=R(a),r=D(n,i);return D(r,o)},H=function(e,t){var a=z(e,t),n=S(a);if(0===n)return L;var i,o=k(e,t),r=[[0,-(i=a).z,i.y,0],[i.z,0,-i.x,0],[-i.y,i.x,0,0],[0,0,0,1]],s=(1-o)/(n*n),l=D(r,r),c=V(s),u=B(l,c,G),h=W(L,r);return W(h,u)},q={front:65,side:80,middle:80,coxia:35,femur:85,tibia:90},K={leftFront:{alpha:0,beta:0,gamma:0},leftMiddle:{alpha:0,beta:0,gamma:0},leftBack:{alpha:0,beta:0,gamma:0},rightFront:{alpha:0,beta:0,gamma:0},rightMiddle:{alpha:0,beta:0,gamma:0},rightBack:{alpha:0,beta:0,gamma:0}},X={alpha:1500,beta:1500,gamma:1500},Y={alpha:1500,beta:1500,gamma:1400},J={alpha:1500,beta:1500,gamma:1500},Z={alpha:1500,beta:1500,gamma:1500},$={alpha:1500,beta:1500,gamma:1400},Q={alpha:1500,beta:1500,gamma:1500},ee={alpha:0,beta:0,gamma:0},te={tx:0,ty:0,tz:0,rx:0,ry:0,rz:0,hipStance:0,legStance:0},ae={tx:0,tz:0,rx:0,ry:0,legStance:-25,hipStance:0,hipSwing:15,liftSwing:40,stepCount:2},ne=[{name:"bodyMesh",showlegend:!0,type:"mesh3d",opacity:.3,color:"#ff6348",x:[100,100,-100,-100,-100,100,100],y:[0,100,100,0,-100,-100,0],z:[100,100,100,100,100,100,100]},{line:{color:"#FC427B",opacity:1,width:12},name:"bodyOutline",showlegend:!0,type:"scatter3d",x:[100,100,-100,-100,-100,100,100],y:[0,100,100,0,-100,-100,0],z:[100,100,100,100,100,100,100]},{marker:{color:"#FC427B",opacity:1,size:14},mode:"markers",name:"head",type:"scatter3d",x:[0],y:[100],z:[100]},{marker:{color:"#32ff7e",opacity:1,size:14},mode:"markers",name:"centerOfGravity",type:"scatter3d",x:[0],y:[0],z:[100]},{marker:{color:"#32ff7e",opacity:.5,size:7},mode:"markers",name:"centerOfGravityProjection",type:"scatter3d",x:[0],y:[0],z:[0]},{line:{color:"#EE5A24",width:10},name:"rightMiddleLeg",showlegend:!1,type:"scatter3d",x:[100,200,300,300],y:[0,0,0,0],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"rightFrontLeg",showlegend:!0,type:"scatter3d",x:[100,170.71067811865476,241.4213562373095,241.4213562373095],y:[100,170.71067811865476,241.42135623730948,241.42135623730948],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"leftFrontLeg",showlegend:!1,type:"scatter3d",x:[-100,-170.71067811865476,-241.42135623730948,-241.42135623730948],y:[100,170.71067811865476,241.4213562373095,241.4213562373095],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"leftMiddleLeg",showlegend:!1,type:"scatter3d",x:[-100,-200,-300,-300],y:[0,12246467991473532e-30,24492935982947064e-30,24492935982947064e-30],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"leftBackLeg",showlegend:!1,type:"scatter3d",x:[-100,-170.71067811865476,-241.42135623730954,-241.42135623730954],y:[-100,-170.71067811865476,-241.42135623730948,-241.42135623730948],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"rightBackLeg",showlegend:!1,type:"scatter3d",x:[100,170.71067811865476,241.42135623730948,241.42135623730948],y:[-100,-170.71067811865476,-241.42135623730954,-241.42135623730954],z:[100,100,100,0]},{name:"supportPolygonMesh",showlegend:!0,type:"mesh3d",opacity:.2,color:"#3c6382",x:[300,241.4213562373095,-241.42135623730948,-300,-241.42135623730954,241.42135623730948],y:[0,241.42135623730948,241.4213562373095,24492935982947064e-30,-241.42135623730948,-241.42135623730954],z:[0,0,0,0,0,0]},{line:{color:"#2f3640",width:2},name:"hexapodXaxis",mode:"lines",showlegend:!1,opacity:1,type:"scatter3d",x:[0,50],y:[0,0],z:[100,100]},{line:{color:"#e67e22",width:2},name:"hexapodYaxis",mode:"lines",showlegend:!1,opacity:1,type:"scatter3d",x:[0,0],y:[0,50],z:[100,100]},{line:{color:"#0097e6",width:2},name:"hexapodZaxis",mode:"lines",showlegend:!1,opacity:1,type:"scatter3d",x:[0,0],y:[0,0],z:[100,150]},{line:{color:"#2f3640",width:2},name:"worldXaxis",showlegend:!1,mode:"lines",opacity:1,type:"scatter3d",x:[0,50],y:[0,0],z:[0,0]},{line:{color:"#e67e22",width:2},name:"worldYaxis",showlegend:!1,mode:"lines",opacity:1,type:"scatter3d",x:[0,0],y:[0,50],z:[0,0]},{line:{color:"#0097e6",width:2},name:"worldZaxis",showlegend:!1,mode:"lines",opacity:1,type:"scatter3d",x:[0,0],y:[0,0],z:[0,50]}],ie={center:{x:.0005967195135552272,y:.11455181630825005,z:-.44957387699746415},eye:{x:.010119765679525836,y:-.573601223004958,z:.04247372257492105},up:{x:.006592638138864914,y:3338632363222382e-20,z:.9999782677677168}},oe={xaxis:{nticks:1,range:[-600,600],zerolinecolor:"#079992",showbackground:!1},yaxis:{nticks:1,range:[-600,600],zerolinecolor:"#079992",showbackground:!1},zaxis:{nticks:1,range:[-10,590],zerolinecolor:"#079992",showbackground:!0,backgroundcolor:"#0a3d62"},aspectmode:"manual",aspectratio:{x:1,y:1,z:1},camera:ie},re={scene:oe,margin:{b:20,l:10,r:10,t:20},paper_bgcolor:"#222f3e",legend:{x:0,y:0,bgcolor:"rgba(44, 62, 80, 0.8)",font:{family:"courier",size:12,color:"#2ecc71"}},showlegend:!1,autosize:!0},se=a(4),le=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hasNoPoints:!1};if(Object(c.a)(this,e),this.dimensions=t,!a.hasNoPoints){var n=this.dimensions,i=n.front,o=n.middle,r=n.side,s=[o,i,-i,-o,-i,i],l=[0,r,r,0,-r,-r];this.verticesList=b.map((function(e,t){return new w(s[t],l[t],0,"".concat(e,"Vertex"),t)})),this.head=new w(0,r,0,"headPoint",7),this.cog=new w(0,0,0,"centerOfGravityPoint",6)}}return Object(u.a)(e,[{key:"cloneTrotShift",value:function(e,t,a,n){return this._doTransform("cloneTrotShift",e,t,a,n)}},{key:"cloneTrot",value:function(e){return this._doTransform("cloneTrot",e)}},{key:"cloneShift",value:function(e,t,a){return this._doTransform("cloneShift",e,t,a)}},{key:"_doTransform",value:function(t){for(var a,n,i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];var s=new e(this.dimensions,{hasNoPoints:!0});return s.cog=(a=this.cog)[t].apply(a,o),s.head=(n=this.head)[t].apply(n,o),s.verticesList=this.verticesList.map((function(e){return e[t].apply(e,o)})),s}},{key:"closedPointsList",get:function(){return[].concat(Object(se.a)(this.verticesList),[this.verticesList[0]])}},{key:"allPointsList",get:function(){return[].concat(Object(se.a)(this.verticesList),[this.cog,this.head])}}]),e}(),ce=function(){function e(t,a){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{alpha:0,beta:0,gamma:0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{hasNoPoints:!1};Object(c.a)(this,e),this._buildNameId=function(e,t){return{name:"".concat(n.position,"-").concat(e),id:"".concat(n.id,"-").concat(t)}},this._buildPointNameIds=function(){return f.map((function(e,t){return n._buildNameId(e,t)}))},Object.assign(this,{dimensions:t,pose:o,position:a}),r.hasNoPoints||(this.allPointsList=this._computePoints(o,i))}return Object(u.a)(e,[{key:"cloneTrotShift",value:function(e,t,a,n){return this._doTransform("cloneTrotShift",e,t,a,n)}},{key:"cloneTrot",value:function(e){return this._doTransform("cloneTrot",e)}},{key:"cloneShift",value:function(e,t,a){return this._doTransform("cloneShift",e,t,a)}},{key:"_doTransform",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i=this.allPointsList.map((function(t){return t[e].apply(t,a)}));return this._buildClone(i)}},{key:"_buildClone",value:function(t){var a=new e(this.dimensions,this.position,this.bodyContactPoint,this.pose,{hasNoPoints:!0});return a.allPointsList=t,a}},{key:"_computePointsWrtBodyContact",value:function(e,t){var a=I(-e,this.dimensions.coxia,0,0),n=I(90-t,this.dimensions.femur,0,0),i=I(0,this.dimensions.tibia,0,0),o=D(a,n),r=D(o,i),s=new w(0,0,0);return[s,s.cloneTrot(a),s.cloneTrot(o),s.cloneTrot(r)]}},{key:"_computePointsWrtHexapodCog",value:function(e,t,a,n){var i=R(y[this.position]+e,t.x,t.y,t.z);return a.map((function(e,t){var a=n[t].name,o=n[t].id;return e.newTrot(i,a,o)}))}},{key:"_computePoints",value:function(e,t){var a=e.alpha,n=e.beta,i=e.gamma,o=this._buildPointNameIds(),r=this._computePointsWrtBodyContact(n,i);return this._computePointsWrtHexapodCog(a,t,r,o)}},{key:"bodyContactPoint",get:function(){return this.allPointsList[0]}},{key:"coxiaPoint",get:function(){return this.allPointsList[1]}},{key:"femurPoint",get:function(){return this.allPointsList[2]}},{key:"footTipPoint",get:function(){return this.allPointsList[3]}},{key:"id",get:function(){return p[this.position]}},{key:"name",get:function(){return"".concat(this.position,"Leg")}},{key:"maybeGroundContactPoint",get:function(){var e=this.allPointsList.slice().reverse(),t=e[0];return e.reduce((function(e,t){return t.z<e.z?t:e}),t)}}]),e}(),ue=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return-k(t,e)>a+n},he=function(e,t,a){return e.reduce((function(e,n){return n.allPointsList.slice(1).reverse().some((function(e){return de(e,t,a)}))?[].concat(Object(se.a)(e),[n]):e}),[])},de=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=-k(t,e);return Math.abs(a-i)<=n},me=[[0,1,3],[0,1,4],[0,2,3],[0,2,4],[0,2,5],[0,3,4],[0,3,5],[1,2,4],[1,2,5],[1,3,4],[1,3,5],[1,4,5],[2,3,5],[2,4,5]],ge=[[0,1,2],[1,2,3],[2,3,4],[3,4,5],[0,4,5],[0,1,5]],fe=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,i=new w(0,0,0),o=E(e,t),r=E(e,a),s=E(e,i),l=z(o,r),c=k(l,l),u=k(z(o,s),l)/c,h=k(z(s,r),l)/c,d=1-u-h,m=-n,g=1+n,f=m<=d&&d<=g,p=m<=u&&u<=g,b=m<=h&&h<=g;return f&&p&&b},pe=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},be=function(){for(var e=[],t=3;t>0;t--)for(var a=3;a>0;a--)for(var n=3;n>0;n--)e.push([t,a,n]);return e}(),ve=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shuffle:!1},a=t.shuffle?pe(me.slice()):me,n=[].concat(Object(se.a)(a),Object(se.a)(ge)),i=null,o=0;o<n.length;o++)for(var r=n[o],s=xe(r,e),c=s.threeLegs,u=s.otherThreeLegs,h=0;h<be.length;h++){var d=be[h],m=ye(c,d),g=Object(l.a)(m,3),f=g[0],p=g[1],b=g[2];if(fe(f,p,b)){var v=F(f,p,b),y=-k(v,f);if(!we(c,d,v,y)&&!Pe(u,v,y)){if(0!==y){var x=he(e,v,y);return{nAxis:v,height:y,groundLegsNoGravity:x}}null===i&&(i={p0:f,p1:p,p2:b,normal:v,height:y})}}}return null===i?null:{nAxis:i.normal,height:i.height,groundLegsNoGravity:he(e,i.normal,i.height)}},ye=function(e,t){return e.map((function(e,a){var n=t[a];return e.allPointsList[n]}))},xe=function(e,t){return{threeLegs:e.map((function(e){return t[e]})),otherThreeLegs:Object(se.a)(Array(6).keys()).filter((function(t){return!e.includes(t)})).map((function(e){return t[e]}))}},we=function(e,t,a,n){for(var i=function(i){var o=[e[i],t[i]],r=o[1];if(o[0].allPointsList.some((function(e,t){return 0!==t&&t!==r&&ue(e,a,n)})))return{v:!0}},o=0;o<3;o++){var r=i(o);if("object"===typeof r)return r.v}return!1},Pe=function(e,t,a){for(var n=0;n<3;n++){if(e[n].allPointsList.slice(1).some((function(e){return ue(e,t,a)})))return!0}return!1},Oe=[].concat(Object(se.a)(me),Object(se.a)(ge)),ke=function(e){var t=Se(e);if(null===t)return null;var a=he(e,t.normal,t.height);return{nAxis:t.normal,height:t.height,groundLegsNoGravity:a}},Se=function(e){for(var t=e.map((function(e){return e.maybeGroundContactPoint})),a=function(e){var a=Oe[e],n=a.map((function(e){return t[e]})),i=Object(l.a)(n,3),o=i[0],r=i[1],s=i[2];if(!fe(o,r,s))return"continue";var c=F(o,r,s),u=-k(c,o);return Object(se.a)(Array(6).keys()).filter((function(e){return!a.includes(e)})).map((function(e){return t[e]})).every((function(e){return!ue(e,c,u)}))?{v:{normal:c,height:u}}:void 0},n=0;n<Oe.length;n++){var i=a(n);if("continue"!==i&&"object"===typeof i)return i.v}return null},je=function(e){for(var t=0,a=0,n=0;n<e.length;n++){var i=e[n],o="footTipPoint"===i.maybeGroundContactPoint.name.split("-")[1],r=0!==i.pose.alpha;o&&r&&(i.pose.alpha>0?a++:t++)}return a>=3||t>=3},Ee=function(e){var t=e[0];if(!e.every((function(e){return e.pose.alpha===t.pose.alpha})))return 0;var a=e.map((function(e){return e.maybeGroundContactPoint.name.split("-")[1]})),n=a[0];if(!a.every((function(e){return e===n})))return 0;if(["coxiaPoint","bodyContactPoint"].includes(n))return 0;if("femurPoint"===n&&t.bodyContactPoint.z===t.femurPoint.z)return 0;return-t.pose.alpha},Te={xAxis:new w(1,0,0,"hexapodXaxis"),yAxis:new w(0,1,0,"hexapodYaxis"),zAxis:new w(0,0,1,"hexapodZaxis")},ze=function(e,t){return{xAxis:e.xAxis.cloneTrot(t),yAxis:e.yAxis.cloneTrot(t),zAxis:e.zAxis.cloneTrot(t)}},Fe=function(e,t,a){return b.map((function(n,i){return new ce(a,n,e[i],t[n])}))},Me=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasNoPoints:!1,assumeKnownGroundPoints:!1,wontRotate:!1};if(Object(c.a)(this,e),Object.assign(this,{dimensions:t,pose:a}),!n.hasNoPoints){var i=new le(this.bodyDimensions),o=Fe(i.verticesList,this.pose,this.legDimensions),r=n.assumeKnownGroundPoints?ke(o):ve(o);if(null!==r){this.foundSolution=!0,this.legPositionsOnGround=r.groundLegsNoGravity.map((function(e){return e.position}));var s=H(r.nAxis,Te.zAxis);if(this.legs=o.map((function(e){return e.cloneTrotShift(s,0,0,r.height)})),this.body=i.cloneTrotShift(s,0,0,r.height),this.localAxes=ze(Te,s),!n.wontRotate&&!this.legs.every((function(e){return 0===e.pose.alpha}))){var l=Ee(r.groundLegsNoGravity);0===this.maybeTwistAngle?je(r.groundLegsNoGravity)&&this._handleComplexTwist(i.verticesList):this._twist(l)}}else this.foundSolution=!1}}return Object(u.a)(e,[{key:"cloneTrot",value:function(e){var t=this.body.cloneTrot(e),a=this.legs.map((function(t){return t.cloneTrot(e)})),n=ze(this.localAxes,e);return this._buildClone(t,a,n)}},{key:"cloneShift",value:function(e,t,a){var n=this.body.cloneShift(e,t,a),i=this.legs.map((function(n){return n.cloneShift(e,t,a)}));return this._buildClone(n,i,this.localAxes)}},{key:"_buildClone",value:function(t,a,n){var i=new e(this.dimensions,this.pose,{hasNoPoints:!0});return Object.assign(i,{body:t,legs:a,localAxes:n,legPositionsOnGround:this.legPositionsOnGround,foundSolution:this.foundSolution}),i}},{key:"_handleComplexTwist",value:function(e){var t=this,a=Fe(e,K,this.legDimensions).map((function(e){return e.cloneShift(0,0,t.dimensions.tibia).maybeGroundContactPoint}));0!==function(e,t){var a=e.find((function(e){return"footTipPoint"===e.name.split("-")[1]}));if(void 0===a)return 0;var n=a.name.split("-")[0],i=t[p[n]],o=Math.atan2(i.y,i.x)-Math.atan2(i.y,i.x);return P(o)}(this.groundContactPoints,a)&&this._twist()}},{key:"_twist",value:function(e){var t=R(e);this.body=this.body.cloneTrot(t),this.legs=this.legs.map((function(e){return e.cloneTrot(t)})),this.localAxes=ze(this.localAxes,t)}},{key:"_danglingHexapod",value:function(e,t){this.body=e,this.legs=t,this.localAxes=Te,this.legPositionsOnGround=[]}},{key:"distanceFromGround",get:function(){return this.body.cog.z}},{key:"cogProjection",get:function(){return new w(this.body.cog.x,this.body.cog.y,0,"centerOfGravityProjectionPoint")}},{key:"info",get:function(){return this.foundSolution?{isAlert:!1,subject:"Success!",body:"Stable orientation found."}:{isAlert:!0,subject:"Unstable position.",body:"error in solving for orientation "}}},{key:"bodyDimensions",get:function(){var e=this.dimensions;return{front:e.front,middle:e.middle,side:e.side}}},{key:"legDimensions",get:function(){var e=this.dimensions;return{coxia:e.coxia,femur:e.femur,tibia:e.tibia}}},{key:"groundContactPoints",get:function(){var e=this;return this.legPositionsOnGround.map((function(t){var a=p[t];return e.legs[a].maybeGroundContactPoint}))}}]),e}(),Ne=a(11),Ce=function e(){Object(c.a)(this,e)};Ce.success={subject:"Success.",body:"All legs are on the floor."},Ce.successLegsOnAir=function(e){return{subject:"Success.",body:"But some legs won't reach target points on the ground:\n".concat(Ce.bulletPoints(e))}},Ce.noSupport=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{listLegs:!1};return{subject:"Failure: No Support.",body:"".concat(e,"\n").concat(a.listLegs?Ce.bulletPoints(t):"")}},Ce.badPoint=function(e){return{subject:"Failure: Bad Point.",body:"At least one point would be shoved to the ground:\n".concat(e.toMarkdownString())}},Ce.bulletPoints=function(e){return e.reduce((function(e,t){return e+" - ".concat(t,"\n")}),"")},Ce.badLeg=function(e){return{subject:"Failure: Bad leg.",body:e}},Ce.alphaNotInRange=function(e,t,a){return{subject:"Failure: Alpha not within range",body:"The alpha (".concat(t,") computed for ").concat(e," leg is not within -").concat(a," < alpha < ").concat(a)}},Ce.initialized={subject:"Initialized",body:"Has not solved for anything yet."};var Ae=function e(){Object(c.a)(this,e)};Ae.targetReached=function(e){return{legPosition:e,message:"Success! (".concat(e,")"),obtainedSolution:!0,reachedTarget:!0}},Ae.targetNotReached=function(e){return{legPosition:e,message:"Success! But this leg won't reach the target ground point. (".concat(e,")"),obtainedSolution:!0,reachedTarget:!1}},Ae.blocked=function(e){return{legPosition:e,message:"Failure. The ground is blocking the path. The target point can only be reached it by digging the ground. (".concat(e,")"),obtainedSolution:!1,reachedTarget:!0}},Ae.femurTooLong=function(e){return{legPosition:e,message:"Failure. Femur length too long. (".concat(e,")"),obtainedSolution:!1,reachedTarget:!1}},Ae.tibiaTooLong=function(e){return{legPosition:e,message:"Failure. Tibia length too long. (".concat(e,")"),obtainedSolution:!1,reachedTarget:!1}},Ae.initialized=function(e){return{legPosition:e,obtainedSolution:!1,reachedTarget:!1,message:"Haven't solved anything yet. (".concat(e,")")}};var Le=function(){function e(t){Object(c.a)(this,e),this.vectors={legXaxis:new w(1,0,0,"legXaxis"),parsVector:null},this.points={bodyContactPoint:null,coxiaPoint:null,targetFootTipPoint:null},this.dimensions={coxia:0,femur:0,tibia:0,summa:0,pars:0},this.angles={beta:null,gamma:null,rho:null},this.info=Ae.initialized(t)}return Object(u.a)(e,[{key:"solve",value:function(e,t,a,n,i){this.angles.rho=i,this.dimensions={coxia:e,femur:t,tibia:a,summa:n};var o,r,l,c=new w(e,0,0,"coxiaPoint"),u=this._computeTargetFootTipPoint(),h=E(c,u),d=S(h);return this.dimensions.pars=d,this.points=Object(s.a)(Object(s.a)({},this.points),{},{coxiaPoint:c,targetFootTipPoint:u}),this.vectors=Object(s.a)(Object(s.a)({},this.vectors),{},{parsVector:h}),(o=d)+(r=t)>(l=a)&&o+l>r&&r+l>o?this._handleCaseTriangleCanForm():this._handleEdgeCase(),this}},{key:"_computeTargetFootTipPoint",value:function(){var e=[this.dimensions.summa,this.angles.rho],t=e[0],a=e[1],n=t*Math.cos(O(a)),i=-t*Math.sin(O(a));return new w(n,0,i,"targetLocalFootTipPoint")}},{key:"_handleCaseTriangleCanForm",value:function(){var e=this.dimensions,t=e.femur,a=e.pars,n=e.tibia,i=this.vectors,o=i.parsVector,r=i.legXaxis,s=this.points.targetFootTipPoint,l=N(t,a,n),c=C(o,r),u=s.z<0?l-c:l+c,h=N(t,n,a),d=t*Math.sin(O(u));this.angles.beta=u,s.z>d?this.info=Ae.blocked(this.legPosition):(this.angles.gamma=h-90,this.info=Ae.targetReached(this.legPosition))}},{key:"_handleEdgeCase",value:function(){var e=this.dimensions,t=e.pars,a=e.tibia,n=e.femur;if(t+a<n)this.info=Ae.femurTooLong(this.legPosition);else{if(t+n<a)return console.log(this.info.legPosition),void(this.info=Ae.tibiaTooLong(this.legPosition));var i=this.vectors,o=i.parsVector,r=i.legXaxis;this.angles=Object(s.a)(Object(s.a)({},this.angles),{},{beta:-C(o,r),gamma:90}),this.info=Ae.targetNotReached(this.legPosition)}}},{key:"legPosition",get:function(){return this.info.legPosition}},{key:"beta",get:function(){return this.angles.beta}},{key:"gamma",get:function(){return this.angles.gamma}},{key:"obtainedSolution",get:function(){return this.info.obtainedSolution}},{key:"reachedTarget",get:function(){return this.info.reachedTarget}},{key:"message",get:function(){return this.info.message}}]),e}(),Ve=function e(){Object(c.a)(this,e)};Ve.reason={MIGHT_BE_STABLE_LESS:"Might be stable.\nLess than three known legs are off the ground.",TOO_MANY_LEGS_OFF:"Definitely Unstable.\nToo many legs off the floor.",RIGHT_LEGS_OFF:"Definitely Unstable.\nAll right legs are off the floor.",LEFT_LEGS_OFF:"Definitely Unstable.\nAll left legs are off the floor.",MIGHT_BE_STABLE_MORE:"Might be stable.\nThree known legs are off the ground.\nOne is on opposite side of the other two."},Ve.checkSupport=function(e){var t=Ve.reason;if(e.length<3)return[!1,t.MIGHT_BE_STABLE_LESS];if(e.length>=4)return[!0,t.TOO_MANY_LEGS_OFF];var a=e.map((function(e){return x[e]}));return a.every((function(e){return!e}))?[!0,t.RIGHT_LEGS_OFF]:a.every((function(e){return e}))?[!0,t.LEFT_LEGS_OFF]:[!1,t.MIGHT_BE_STABLE_MORE]};var _e=Ve,Ge=function(){function e(){Object(c.a)(this,e),this.params={},this.partialPose={},this.pose={},this.foundSolution=!1,this.legPositionsOffGround=[],this.message=Ce.initialized}return Object(u.a)(e,[{key:"solve",value:function(e,t,a,n){if(this.params={bodyContactPoints:t,groundContactPoints:a,axes:n,legDimensions:e},this._hasBadVertex(t))return this;for(var i=e.coxia,o=e.femur,r=e.tibia,s=0;s<6;s++){var l=b[s],c=Be(t[s],a[s],n.zAxis);if(c.coxiaPoint.z<0)return this._handleBadPoint(c.coxiaPoint),this;var u=y[l],h=We(c.coxiaUnitVector,u,n.xAxis,n.zAxis);if(Math.abs(h)>v)return this._finalizeFailure(Ce.alphaNotInRange(l,h,v)),this;var d=new Le(l).solve(i,o,r,c.summa,c.rho);if(!d.obtainedSolution)return this._finalizeFailure(Ce.badLeg(d.message)),this;if(!d.reachedTarget&&this._hasNoMoreSupport(l))return this;this.partialPose[l]={alpha:h,beta:d.beta,gamma:d.gamma}}return this._finalizeSuccess(),this}},{key:"_hasNoMoreSupport",value:function(e){this.legPositionsOffGround.push(e);var t=_e.checkSupport(this.legPositionsOffGround),a=Object(l.a)(t,2),n=a[0],i=a[1];if(n){var o=Ce.noSupport(i,this.legPositionsOffGround);return this._finalizeFailure(o),!0}return!1}},{key:"_handleBadPoint",value:function(e){this._finalizeFailure(Ce.badPoint(e))}},{key:"_hasBadVertex",value:function(e){for(var t=0;t<6;t++){var a=e[t];if(a.z<0)return this._handleBadPoint(a),!0}return!1}},{key:"_finalizeFailure",value:function(e){this.message=e,this.foundSolution=!1}},{key:"_finalizeSuccess",value:function(){this.pose=this.partialPose,this.foundSolution=!0,this.hasLegsOffGround?this.message=Ce.successLegsOnAir(this.legPositionsOffGround):this.message=Ce.success}},{key:"hasLegsOffGround",get:function(){return this.legPositionsOffGround.length>0}}]),e}(),Be=function(e,t,a,n){var i,o,r,s=E(e,t),l=function(e,t){var a=k(e,t)/k(t,t),n=T(t,a);return E(n,e)}(s,a),c=T(i=l,1/S(i)),u=T(c,n);return{coxiaUnitVector:c,coxiaVector:u,coxiaPoint:(r=u,new w((o=e).x+r.x,o.y+r.y,o.z+r.z)),rho:C(c,s),summa:S(s)}},We=function(e,t,a,n){var i=((j(e,a,n)?-1:1)*C(e,a)-t)%360;return i>180?i-360:i<-180?i+360:180===i||-180===i?0:i},De=Ge,Ie=function(e,t,a){var n=Re(e,t),i=n.tVec,o=n.rotMatrix,r=n.startPose,s=new Me(e,r),l=Ue(s,o,i,{rotateThenShift:a});return[(new De).solve(s.legDimensions,l.bodyContactPoints,l.groundContactPoints,l.axes),l.groundContactPoints]},Re=function(e,t){var a,n=(a=t,Object.entries(a).reduce((function(e,t){var a=Object(l.a)(t,2),n=a[0],i=a[1];return Object(s.a)(Object(s.a)({},e),{},Object(Ne.a)({},n,Number(i)))}),{})),i=e.middle,o=e.side,r=e.tibia,c=function(e,t,a,n,i,o){return new w(e*n,t*i,a*o)}(n.tx,n.ty,n.tz,i,o,r),u=function(e,t){var a={beta:t,gamma:-t};return[0,-e,e,0,-e,e].reduce((function(e,t,n){return e[b[n]]=Object(s.a)({alpha:t},a),e}),{})}(n.hipStance,n.legStance),h=n.rx,d=n.ry,m=n.rz;return{tVec:c,startPose:u,rotMatrix:U(h,d,m)}},Ue=function(e,t,a,n){var i=n.rotateThenShift;return{groundContactPoints:e.legs.map((function(e){return e.maybeGroundContactPoint})),bodyContactPoints:i?e.body.cloneTrot(t).cloneShift(a.x,a.y,a.z).verticesList:e.body.cloneShift(a.x,a.y,a.z).cloneTrot(t).verticesList,axes:{xAxis:new w(1,0,0).cloneTrot(t),zAxis:new w(0,0,1).cloneTrot(t)}}},He=function(e,t,a){var n=E(t.target,a.target),i=E(t.current,a.current),o=C(i,n),r=R(j(i,n,new w(0,0,1))?o:-o),s=t.current.cloneTrot(r),l=E(s,t.target);return e.cloneTrot(r).cloneShift(l.x,l.y,0)},qe=function(e,t,a){for(var n=t.reduce((function(e,t){return e[t.name]=t,e}),{}),i=Object.keys(n),o=null,r=null,s=null,l=null,c=0;c<e.length;c++){var u=e[c],h=u.name;if(!a.includes(h)&&i.includes(h)){if(null!==o){r=u,l=n[h];break}o=u,s=n[h]}}return null===r?{foundTwoPoints:!1}:{points1:{target:s,current:o},points2:{target:l,current:r},foundTwoPoints:!0}},Ke=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{rotateThenShift:!0},n=Ie(e,t,a.rotateThenShift),i=Object(l.a)(n,2),o=i[0],r=i[1];if(!o.foundSolution)return{pose:null,obtainedSolution:!1,message:o.message,hexapod:null};var s=new Me(e,o.pose),c=o.legPositionsOffGround,u=qe(s.groundContactPoints,r,c),h=u.foundTwoPoints?He(s,u.points1,u.points2):s;return{pose:o.pose,obtainedSolution:!0,message:o.message,hexapod:h}},Xe=function(e,t){var a=function(e){var t=e.body.closedPointsList,a=t.map((function(e){return e.x})),n=t.map((function(e){return e.y})),i=t.map((function(e){return e.z})),o=e.body,r=o.head,l=o.cog,c=e.cogProjection,u=e.legs,h=e.groundContactPoints,d=Object(s.a)(Object(s.a)({},ne[0]),{},{x:a,y:n,z:i}),m=Object(s.a)(Object(s.a)({},ne[1]),{},{x:a,y:n,z:i}),g=Object(s.a)(Object(s.a)({},ne[2]),{},{x:[r.x],y:[r.y],z:[r.z]}),f=Object(s.a)(Object(s.a)({},ne[3]),{},{x:[l.x],y:[l.y],z:[l.z]}),p=Object(s.a)(Object(s.a)({},ne[4]),{},{x:[c.x],y:[c.y],z:[c.z]}),b=u.map((function(e,t){return Object(s.a)(Object(s.a)({},ne[t+5]),{},{x:e.allPointsList.map((function(e){return e.x})),y:e.allPointsList.map((function(e){return e.y})),z:e.allPointsList.map((function(e){return e.z}))})})),v=Object(s.a)(Object(s.a)({},ne[11]),{},{x:h.map((function(e){return e.x})),y:h.map((function(e){return e.y})),z:h.map((function(e){return e.z}))}),y=e.body.dimensions.front/2,x=e.localAxes,w=x.xAxis,P=x.yAxis,O=x.zAxis,k=Object(s.a)(Object(s.a)({},ne[12]),{},{x:[l.x,l.x+y*w.x],y:[l.y,l.y+y*w.y],z:[l.z,l.z+y*w.z]}),S=Object(s.a)(Object(s.a)({},ne[13]),{},{x:[l.x,l.x+y*P.x],y:[l.y,l.y+y*P.y],z:[l.z,l.z+y*P.z]}),j=Object(s.a)(Object(s.a)({},ne[14]),{},{x:[l.x,l.x+y*O.x],y:[l.y,l.y+y*O.y],z:[l.z,l.z+y*O.z]}),E=Object(s.a)(Object(s.a)({},ne[15]),{},{x:[0,y]}),T=Object(s.a)(Object(s.a)({},ne[16]),{},{y:[0,y]}),z=Object(s.a)(Object(s.a)({},ne[17]),{},{z:[0,y]});return[d,m,g,f,p].concat(Object(se.a)(b),[v,k,S,j,E,T,z])}(e);[null,void 0,{}].includes(t)&&(t=ie);var n,i=(n=e.dimensions,Object.values(n).reduce((function(e,t){return e+t}),0)),o=[-i,i],r=Object(s.a)(Object(s.a)({},oe.xaxis),{},{range:o}),l=Object(s.a)(Object(s.a)({},oe.yaxis),{},{range:o}),c=Object(s.a)(Object(s.a)({},oe.zaxis),{},{range:[-10,2*i-10]}),u=Object(s.a)(Object(s.a)({},oe),{},{xaxis:r,yaxis:l,zaxis:c,camera:t});return[a,Object(s.a)(Object(s.a)({},re),{},{scene:u})]},Ye=a(47),Je=a(21),Ze=a(48),$e="Dimensions",Qe="Inverse Kinematics",et="Forward Kinematics",tt="Leg Patterns",at="Root",nt="Walking Gaits",it="/inverse-kinematics",ot="/forward-kinematics",rt="/leg-patterns",st="/",lt="/walking-gaits",ct=["alpha","beta","gamma"],ut=["front","side","middle","coxia","femur","tibia"],ht=["leftFront","rightFront","leftMiddle","rightMiddle","leftBack","rightBack"],dt=["tx","ty","tz","rx","ry","rz","hipStance","legStance"],mt=["hipSwing","liftSwing","legStance","hipStance","tx","tz","rx","ry","stepCount"],gt=function(e){return{minVal:-e,maxVal:e,stepVal:1}},ft={30:gt(30),45:gt(45),60:gt(60),90:gt(90),180:gt(180)},pt={minVal:-1,maxVal:1,stepVal:.01},bt={dimensionInputs:{minVal:0,maxVal:1/0,stepVal:1},tx:pt,ty:pt,tz:pt,rx:ft[30],ry:ft[30],rz:ft[60],legStance:ft[90],hipStance:ft[60],alpha:ft[90],beta:ft[90],gamma:ft[90]},vt={tx:{minVal:-.25,maxVal:.25,stepVal:.01,defaultVal:0},tz:{minVal:-.5,maxVal:.5,stepVal:.01,defaultVal:-.1},rx:{minVal:-15,maxVal:15,stepVal:.5,defaultVal:0},ry:{minVal:-15,maxVal:15,stepVal:.5,defaultVal:0},legStance:{minVal:-50,maxVal:50,stepVal:1,defaultVal:-25},hipStance:{minVal:0,maxVal:40,stepVal:1,defaultVal:20},hipSwing:{minVal:10,maxVal:40,stepVal:1,defaultVal:15},liftSwing:{minVal:10,maxVal:70,stepVal:1,defaultVal:40},stepCount:{minVal:2,maxVal:15,stepVal:1,defaultVal:2}},yt={mug:i.a.createElement(Ye.a,{className:"vertical-align"}),circle:i.a.createElement(Ze.a,{className:"small-icon"}),square:i.a.createElement(Je.d,{className:"small-icon"}),octocat:i.a.createElement(Je.b,{className:"vertical-align"}),check:i.a.createElement(Je.a,{className:"vertical-align"}),times:i.a.createElement(Je.e,{className:"vertical-align"}),home:i.a.createElement(Je.c,{className:"vertical-align"})},xt={inverseKinematics:{path:it,description:Qe,icon:yt.circle},forwardKinematics:{path:ot,description:et,icon:yt.circle},legPatterns:{path:rt,description:tt,icon:yt.circle},landingPage:{path:st,description:at,icon:yt.home},walkingGaits:{path:lt,description:nt,icon:yt.circle}},wt=[xt.inverseKinematics,xt.forwardKinematics,xt.legPatterns,xt.walkingGaits,xt.landingPage],Pt=[{name:"REPO",icon:yt.octocat,description:"Source Code",url:"https://github.com/alex-pyasetskiy"}],Ot=function(e){var t=e.link,a=e.showDesc;return i.a.createElement("li",null,i.a.createElement(g.b,{to:t.path,className:"link-icon"},i.a.createElement("span",null,t.icon," ",a?t.description:null)))},kt=function(e){var t=e.path,a=e.description,n=e.icon;return i.a.createElement("li",null,i.a.createElement("a",{href:t,className:"link-icon",target:"_blank",rel:"noopener noreferrer",children:i.a.createElement("span",null,n," ",a)}))},St=function(){return i.a.createElement("ul",{className:"row-container no-bullet",id:"top-bar"},Pt.map((function(e){return i.a.createElement(kt,{path:e.url,key:"navBullet"+e.url,icon:e.icon})})),wt.map((function(e){return i.a.createElement(Ot,{key:"navBullet"+e.path,link:e})})))},jt=function(){return i.a.createElement("footer",null,i.a.createElement("nav",{id:"nav"},i.a.createElement("ul",{className:"grid-cols-1 no-bullet"},Pt.map((function(e){return i.a.createElement(kt,{path:e.url,key:"navDetailed"+e.url,icon:e.icon,description:e.description})})),wt.map((function(e){return i.a.createElement(Ot,{key:"navDetailed"+e.path,link:e,showDesc:!0})})))))},Et=function(){return i.a.createElement(St,null)},Tt=a(50),zt=a.n(Tt),Ft=a(51),Mt=a.n(Ft)()(zt.a),Nt=function(e){var t={data:e.data,layout:e.layout,onRelayout:e.onRelayout,revision:e.revision,config:{displaylogo:!1,responsive:!0},style:{height:"100%",width:"100%"},useResizeHandler:!0};return i.a.createElement(Mt,t)},Ct=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={message:null},n.myRef=i.a.createRef(),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({message:null})}},{key:"handleChange",value:function(e){var t=this.props.rangeParams,a=t.minVal,n=t.maxVal,i=t.stepVal,o=this.myRef.current.validity;if(o.badInput)this.setState({message:"NaN"});else if(o.rangeOverflow)this.setState({message:"max=".concat(n)});else if(o.rangeUnderflow)this.setState({message:"min=".concat(a)});else if(o.stepMismatch)this.setState({message:"step=".concat(i)});else if(this.myRef.current.checkValidity()){var r=parseFloat(e);isNaN(r)?this.setState({message:"NaN"}):(this.setState({message:null}),this.props.handleChange(this.props.name,r))}else this.setState({message:"Error"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.rangeParams,o=t.id,r=t.value,s=o||a,l=n.minVal,c=n.maxVal,u=n.stepVal,h={type:"number",input:"numeric",id:s,ref:this.myRef,value:r,min:l,max:c,step:u,style:{margin:0}};return i.a.createElement("div",null,i.a.createElement("label",{htmlFor:s,className:"label"},a),i.a.createElement("input",Object.assign({},h,{onChange:function(t){return e.handleChange(t.target.value)}})),i.a.createElement("label",{className:"label red",style:{opacity:1}},this.state.message))}}]),a}(n.Component),At=a(20),Lt=a.n(At),Vt=function(e){var t=e.info;return i.a.createElement("div",{className:"message"},i.a.createElement("h2",{className:"red"},yt.times," ",t.subject),i.a.createElement(Lt.a,{source:t.body}))},_t=function(e){var t=e.id,a=e.value,n=e.handleChange,o=e.showValue;return i.a.createElement("div",{className:"switch-container"},i.a.createElement("label",{className:"switch",htmlFor:t},i.a.createElement("input",{id:t,type:"checkbox",value:a,onChange:n}),i.a.createElement("span",{className:"toggle-switch-widget round"})),i.a.createElement("label",{className:"label",htmlFor:t},o?a:null))},Gt=function(e){var t=e.title,a=e.other,n=e.children;return i.a.createElement("div",null,i.a.createElement("div",{className:"row-container flex-wrap"},t,a),n)},Bt=function(e){var t=e.handleClick,a=e.children;return i.a.createElement("button",{type:"button",className:"button",onClick:t},a)},Wt=function(e){var t=e.reset;return i.a.createElement(Bt,{handleClick:t},"reset")},Dt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).sectionName=$e,e.state={isFine:!0},e.reset=function(){return e.props.onUpdate(q)},e.toggleMode=function(){return e.setState({isFine:!e.state.isFine})},e.updateFieldState=function(t,a){return e.updateDimensions(t,a)},e.updateDimensions=function(t,a){var n=Object(s.a)(Object(s.a)({},e.props.params.dimensions),{},Object(Ne.a)({},t,a));e.props.onUpdate(n)},e.render=function(){return i.a.createElement(Gt,{title:i.a.createElement("h2",null,e.sectionName),other:e.toggleSwitch},e.NumberInputFields,i.a.createElement(Wt,{reset:e.reset}))},e}return Object(u.a)(a,[{key:"toggleSwitch",get:function(){var e={id:"DimensionsWidgetSwitch",value:this.state.isFine?"1x":"5x",handleChange:this.toggleMode,showValue:!0};return i.a.createElement(_t,e)}},{key:"NumberInputFields",get:function(){var e=this,t=bt.dimensionInputs,a=t.minVal,n=t.maxVal,o=this.state.isFine?1:5,r=this.props.params.dimensions,s=ut.map((function(t){var s={name:t,value:r[t],rangeParams:{minVal:a,maxVal:n,stepVal:o},handleChange:e.updateFieldState};return i.a.createElement(Ct,Object.assign({},s,{key:t}))}));return i.a.createElement("div",{className:"grid-cols-6"},s)}}]),a}(n.Component),It=a(52),Rt=function(e){var t=e.name,a=e.id,n=e.value,o=e.rangeParams,r=e.handleChange;return i.a.createElement("div",{className:"slider-container cell"},i.a.createElement("div",{className:"label"},i.a.createElement("label",{htmlFor:a||t},t),": ",i.a.createElement("span",null,n)),i.a.createElement("input",{type:"range",id:a||t,min:o.minVal,max:o.maxVal,step:o.stepVal,value:n,onChange:function(e){return r(t,e.target.value)},className:"slider"}))},Ut=function(e){var t=e.names,a=e.values,n=e.handleChange,o=e.rangeParams;return t.map((function(e){return i.a.createElement(Rt,{key:e,name:e,rangeParams:o?o[e]:bt[e],handleChange:n,value:a[e]})}))},Ht=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).updateFieldState=function(t,a){var n=Number(a);isNaN(n)||e.props.onUpdate(e.props.name,t,n)},e.fields=function(t){return ct.map((function(a){var n="".concat(e.props.name,"-").concat(a),o={id:n,name:a,key:n,value:e.props.pose[a],rangeParams:bt[a],handleChange:e.updateFieldState};return i.a.createElement(t,o)}))},e.render=function(){return i.a.createElement(Gt,{title:i.a.createElement("h3",null,e.props.name)},i.a.createElement("div",{className:e.props.renderStacked?"grid-cols-1":"grid-cols-3"},e.fields(e.props.WidgetType)))},e}return a}(n.Component),qt=new WebSocket("ws://hexabot.node:4000/"),Kt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=et,e.state={WidgetType:Ct},e.componentDidMount=function(){e.props.onMount(e.pageName),qt.onopen=function(){console.log("connected")},qt.onmessage=function(e){},qt.onclose=function(){console.log("disconnected")}},e.reset=function(){return e.props.onUpdate(K)},e.translate=function(e,t,a){var n=2e3/180*e;return 0===e?t:(console.log(t-n),a?t+n:t-n)},e.toServo=function(t){for(var a=t.rightMiddle,n=t.rightFront,i=t.leftFront,o=t.leftMiddle,r=t.leftBack,s=t.rightBack,c={1:e.translate(i.alpha,X.alpha,!1),2:e.translate(i.beta,X.beta,!0),3:e.translate(i.gamma,X.gamma,!1),5:e.translate(o.alpha,Y.alpha,!1),6:e.translate(o.beta,Y.beta,!0),7:e.translate(o.gamma,Y.gamma,!1),9:e.translate(r.alpha,J.alpha,!1),10:e.translate(r.beta,J.beta,!0),11:e.translate(r.gamma,J.gamma,!1),21:e.translate(s.alpha,Q.alpha,!1),22:e.translate(s.beta,Q.beta,!1),23:e.translate(s.gamma,Q.gamma,!1),25:e.translate(a.alpha,$.alpha,!1),26:e.translate(a.beta,$.beta,!1),27:e.translate(a.gamma,$.gamma,!1),30:e.translate(n.alpha,Z.alpha,!1),31:e.translate(n.beta,Z.beta,!1),32:e.translate(n.gamma,Z.gamma,!1)},u=[],h=0,d=Object.entries(c);h<d.length;h++){var m=Object(l.a)(d[h],2),g=m[0],f=m[1];u.push("#".concat(g,"P").concat(f.toFixed()))}return u.push("T100D100"),u},e.updatePose=function(t,a,n){var i=e.props.params.pose,o=Object(s.a)(Object(s.a)({},i),{},Object(Ne.a)({},t,Object(s.a)(Object(s.a)({},i[t]),{},Object(Ne.a)({},a,n))));e.toServo(o).join("");console.log(e.toServo(o)),e.props.onUpdate(o)},e.toggleMode=function(){var t=e.state.WidgetType===Rt?Ct:Rt;e.setState({WidgetType:t})},e.legPoseWidget=function(t){return i.a.createElement(Ht,{key:t,name:t,pose:e.props.params.pose[t],onUpdate:e.updatePose,WidgetType:e.state.WidgetType,renderStacked:e.state.WidgetType===Rt})},e.render=function(){return i.a.createElement(Gt,{title:i.a.createElement("h2",null,e.pageName),other:e.toggleSwitch},i.a.createElement("div",{className:"grid-cols-2"},ht.map((function(t){return e.legPoseWidget(t)}))),i.a.createElement(Wt,{reset:e.reset}))},e}return Object(u.a)(a,[{key:"toggleSwitch",get:function(){var e={id:"FwdKinematicsSwitch",value:Object(It.renderToString)(this.state.WidgetType),handleChange:this.toggleMode,showValue:!1};return i.a.createElement(_t,e)}}]),a}(n.Component),Xt={rightMiddle:"rm",rightFront:"rf",leftFront:"lf",leftMiddle:"lm",leftBack:"lb",rightBack:"rb"},Yt=function(e){var t=function(e){return b.reduce((function(t,a){var n=Xt[a],i=e[a],o=i.alpha,r=i.beta,s=i.gamma;return t[n]={alpha:Number(o).toFixed(2),beta:Number(r).toFixed(2),gamma:Number(s).toFixed(2)},t}),{})}(e.pose),a=function(e){var t=e.rm,a=e.rf,n=e.lf,i=e.lm,o=e.lb,r=e.rb;return"\n\n| POSITION    | ALPHA       | BETA        | GAMMA       |\n|-------------|:-----------:|:-----------:|:-----------:|\n| rightMiddle | ".concat(t.alpha," | ").concat(t.beta,"  | ").concat(t.gamma," |\n| rightFront  | ").concat(a.alpha," | ").concat(a.beta,"  | ").concat(a.gamma," |\n| leftFront   | ").concat(n.alpha," | ").concat(n.beta,"  | ").concat(n.gamma," |\n| leftMiddle  | ").concat(i.alpha," | ").concat(i.beta,"  | ").concat(i.gamma," |\n| leftBack    | ").concat(o.alpha," | ").concat(o.beta,"  | ").concat(o.gamma," |\n| rightBack   | ").concat(r.alpha," | ").concat(r.beta,"  | ").concat(r.gamma," |\n\n")}({rm:t.rm,rf:t.rf,lf:t.lf,lm:t.lm,lb:t.lb,rb:t.rb});return i.a.createElement("div",{className:"table-container"},i.a.createElement(Lt.a,{source:a}))},Jt=new WebSocket("ws://hexabot.node:4000/"),Zt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=Qe,e.state={ikParams:te,errorMessage:null},e.componentDidMount=function(){e.props.onMount(e.pageName),Jt.onopen=function(){console.log("connected")},Jt.onmessage=function(e){},Jt.onclose=function(){console.log("disconnected")}},e.reset=function(){var t=Ke(e.props.params.dimensions,te);e.updateHexapodPlot(t.hexapod,te)},e.translate=function(e,t,a){var n=2e3/180*e;return 0===e?t:a?t+n:t-n},e.toServo=function(t){for(var a=t.rightMiddle,n=t.rightFront,i=t.leftFront,o=t.leftMiddle,r=t.leftBack,s=t.rightBack,c={1:e.translate(i.alpha,X.alpha,!1),2:e.translate(i.beta,X.beta,!0),3:e.translate(i.gamma,X.gamma,!1),5:e.translate(o.alpha,Y.alpha,!1),6:e.translate(o.beta,Y.beta,!0),7:e.translate(o.gamma,Y.gamma,!1),9:e.translate(r.alpha,J.alpha,!1),10:e.translate(r.beta,J.beta,!0),11:e.translate(r.gamma,J.gamma,!1),21:e.translate(s.alpha,Q.alpha,!1),22:e.translate(s.beta,Q.beta,!1),23:e.translate(s.gamma,Q.gamma,!0),25:e.translate(a.alpha,$.alpha,!1),26:e.translate(a.beta,$.beta,!1),27:e.translate(a.gamma,$.gamma,!0),30:e.translate(n.alpha,Z.alpha,!1),31:e.translate(n.beta,Z.beta,!1),32:e.translate(n.gamma,Z.gamma,!0)},u=[],h=0,d=Object.entries(c);h<d.length;h++){var m=Object(l.a)(d[h],2),g=m[0],f=m[1];u.push("#".concat(g,"P").concat(f.toFixed()))}return u.push("T100D100"),u},e.updateHexapodPlot=function(t,a){e.setState({ikParams:a,errorMessage:null}),e.props.onUpdate(t)},e.updateIkParams=function(t,a){var n=Object(s.a)(Object(s.a)({},e.state.ikParams),{},Object(Ne.a)({},t,a)),i=Ke(e.props.params.dimensions,n);if(!i.obtainedSolution)return e.props.onUpdate(null),void e.setState({errorMessage:i.message});var o=e.toServo(i.pose).join("");Jt.send(JSON.stringify(o)),e.updateHexapodPlot(i.hexapod,n)},e.render=function(){return i.a.createElement(Gt,{title:i.a.createElement("h2",null,e.pageName)},i.a.createElement("div",{className:"grid-cols-3"},e.sliders.slice(0,6)),i.a.createElement("div",{className:"grid-cols-2"},e.sliders.slice(6,8)),i.a.createElement(Wt,{reset:e.reset}),e.additionalInfo)},e}return Object(u.a)(a,[{key:"sliders",get:function(){return Ut({names:dt,values:this.state.ikParams,handleChange:this.updateIkParams})}},{key:"additionalInfo",get:function(){return this.state.errorMessage?i.a.createElement(Vt,{info:this.state.errorMessage}):i.a.createElement(Yt,{pose:this.props.params.pose})}}]),a}(n.Component),$t=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=at,e.componentDidMount=function(){return e.props.onMount(e.pageName)},e.render=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"hexapod-img"})," ",i.a.createElement("div",{id:"landing"},i.a.createElement(Lt.a,{source:"# Hexapod Robot Simulator"})),i.a.createElement(jt,null))},e}return a}(i.a.Component),Qt=new WebSocket("ws://hexabot.node:4000/"),ea=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=tt,e.state={patternParams:ee},e.componentDidMount=function(){e.props.onMount(e.pageName),e.reset(),Qt.onopen=function(){console.log("connected")},Qt.onmessage=function(e){},Qt.onclose=function(){console.log("disconnected")}},e.reset=function(){e.props.onUpdate(K),e.setState({patternParams:ee})},e.translate=function(e,t,a){var n=2e3/180*e;if(0===e)return t;var i=a?t+n:t-n;return console.log(i.toFixed()),i.toFixed()},e.toServo=function(t){for(var a=t.rightMiddle,n=t.rightFront,i=t.leftFront,o=t.leftMiddle,r=t.leftBack,s=t.rightBack,c={1:e.translate(i.alpha,X.alpha,!1),2:e.translate(i.beta,X.beta,!0),3:e.translate(i.gamma,X.gamma,!1),5:e.translate(o.alpha,Y.alpha,!1),6:e.translate(o.beta,Y.beta,!0),7:e.translate(o.gamma,Y.gamma,!1),9:e.translate(r.alpha,J.alpha,!1),10:e.translate(r.beta,J.beta,!0),11:e.translate(r.gamma,J.gamma,!1),21:e.translate(s.alpha,Q.alpha,!1),22:e.translate(s.beta,Q.beta,!1),23:e.translate(s.gamma,Q.gamma,!0),25:e.translate(a.alpha,$.alpha,!1),26:e.translate(a.beta,$.beta,!1),27:e.translate(a.gamma,$.gamma,!0),30:e.translate(n.alpha,Z.alpha,!1),31:e.translate(n.beta,Z.beta,!1),32:e.translate(n.gamma,Z.gamma,!0)},u=[],h=0,d=Object.entries(c);h<d.length;h++){var m=Object(l.a)(d[h],2),g=m[0],f=m[1];u.push("#".concat(g,"P").concat(f))}return u.push("T100D100"),u},e.updatePatternPose=function(t,a){var n=Object(s.a)(Object(s.a)({},e.state.patternParams),{},Object(Ne.a)({},t,Number(a))),i={};for(var o in K)i[o]=n;var r=e.toServo(i).join("");Qt.send(JSON.stringify(r)),e.props.onUpdate(i),e.setState({patternParams:n})},e.render=function(){return i.a.createElement(Gt,{title:i.a.createElement("h2",null,e.pageName)},i.a.createElement("div",{className:"grid-cols-1"},e.sliders),i.a.createElement(Wt,{reset:e.reset}))},e}return Object(u.a)(a,[{key:"sliders",get:function(){return Ut({names:ct,values:this.state.patternParams,handleChange:this.updatePatternPose})}}]),a}(n.Component),ta=function(e,t,a,n,i){var o=sa(e,t,a,n,i),r=o.forwardAlphaSeqs,l=o.liftBetaSeqs,c=o.liftGammaSeqs,u=2*n,h=aa(r,c,l,u),d=na(r,c,l,u);return Object(s.a)(Object(s.a)({},h),d)},aa=function(e,t,a,n){return["leftFront","rightMiddle","leftBack"].reduce((function(i,o){var r=e[o],s=t[o],l=a[o],c=[].concat(Object(se.a)(s),Object(se.a)(s.slice().reverse()),Object(se.a)(ha(s[0],n))),u=[].concat(Object(se.a)(l),Object(se.a)(l.slice().reverse()),Object(se.a)(ha(l[0],n)));return i[o]={alpha:[].concat(Object(se.a)(r),Object(se.a)(r.slice().reverse())),gamma:c,beta:u},i}),{})},na=function(e,t,a,n){return["rightFront","leftMiddle","rightBack"].reduce((function(i,o){var r=e[o],s=t[o],l=a[o],c=[].concat(Object(se.a)(ha(s[0],n)),Object(se.a)(s),Object(se.a)(s.slice().reverse())),u=[].concat(Object(se.a)(ha(l[0],n)),Object(se.a)(l),Object(se.a)(l.slice().reverse()));return i[o]={alpha:[].concat(Object(se.a)(r.slice().reverse()),Object(se.a)(r)),gamma:c,beta:u},i}),{})},ia=function(e,t,a,n){var i=Object.keys(e),o={};return i.forEach((function(i){var r=e[i],s=r.alpha,l=r.beta,c=r.gamma,u=la(l,t,n),h=la(c,-t/2,n),d=a[i],m=la(s-d,d,n),g=la(s,d,n),f=d/2,p=la(s+d,-f,n),b=la(s+f,-f,n),v=la(s,-f,n),y=la(s-f,-f,n);o[i]=oa(i,u,h,m,g,p,b,v,y)})),o},oa=function(e,t,a,n,i,o,r,s,l){var c=n.length,u=a.slice().reverse(),h=t.slice().reverse(),d=t[0],m=a[0],g=ha(d,c),f=ha(m,c),p=[t,h,g,g,g,g],b=[a,u,f,f,f,f],v={leftBack:0,rightFront:1,leftMiddle:2,rightBack:3,leftFront:4,rightMiddle:5};return{alpha:ra(v[e],[n,i,o,r,s,l]),beta:ra(v[e],p),gamma:ra(v[e],b)}},ra=function(e,t){return[].concat(Object(se.a)(t),Object(se.a)(t)).slice(e,e+6).flat()},sa=function(e,t,a,n,i){var o=2*n,r=Object.keys(e),s={},l={},c={};return r.forEach((function(i){var r=e[i],u=r.alpha,h=r.beta,d=r.gamma,m=a[i];s[i]=la(u-m,2*m,o),l[i]=la(h,t,n),c[i]=la(d,-t/2,n)})),{forwardAlphaSeqs:s,liftBetaSeqs:l,liftGammaSeqs:c}},la=function(e,t,a){for(var n=t/a,i=e,o=[],r=0;r<a;r++)i+=n,o.push(i);return o},ca=function(e){return{leftFront:-e,rightMiddle:e,leftBack:-e,rightFront:e,leftMiddle:-e,rightBack:e}},ua=function(e){return{leftFront:e,rightMiddle:e,leftBack:e,rightFront:e,leftMiddle:e,rightBack:e}},ha=function(e,t){if(0===t)return[];for(var a=[e];2*a.length<=t;)a=a.concat(a);return a.length<t&&(a=a.concat(a.slice(0,t-a.length))),a},da=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tx:0,tz:0,rx:0,ry:0,legStance:0,hipStance:25,stepCount:5,hipSwing:25,liftSwing:40},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tripod",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"walking",i=t.hipStance,o=t.rx,r=t.ry,s=t.tx,c=t.tz,u=t.legStance,h={tx:s,ty:0,tz:c,legStance:u,hipStance:i,rx:o,ry:r,rz:0},d=Ie(e,h,!0),m=Object(l.a)(d,1),g=m[0];if(!g.foundSolution||g.hasLegsOffGround)return null;var f=t.hipSwing,p=t.liftSwing,b=t.stepCount,v=[Math.abs(f),Math.abs(p)],y=v[0],x=v[1],w="rotating"===n?ua(y):ca(y),P="ripple"===a?ia(g.pose,x,w,b):ta(g.pose,x,w,b);return console.log(P),P},ma=new WebSocket("ws://hexabot.node:4000/"),ga=function(e,t){return Object.keys(e).reduce((function(a,n){var i=e[n],o=i.alpha,r=i.beta,s=i.gamma;return a[n]={alpha:o[t],beta:r[t],gamma:s[t]},a}),{})},fa=function(e,t,a){return i.a.createElement(_t,{id:e,handleChange:a,value:t,showValue:!0})},pa=function(e,t,a){return i.a.createElement("div",{className:"grid-cols-3",style:{paddingBottom:"20px"}},e,t,a)},ba=function(e){return e.leftMiddle.alpha.length},va=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).pageName=nt,e.currentTwist=0,e.walkSequence=null,e.state={gaitParams:ae,isAnimating:!1,animationDelay:ae.animationDelay,isTripodGait:!0,isForward:!0,inWalkMode:!0,showGaitWidgets:!0,animationCount:1,sequence:{}},e.componentDidMount=function(){e.props.onMount(e.pageName);var t=e.state,a=t.isTripodGait,n=t.inWalkMode;e.setWalkSequence(ae,a,n),ma.onopen=function(){console.log("servo controller connected")},ma.onclose=function(){console.log("servo controller disconnected")}},e.componentWillUnmount=function(){clearInterval(e.intervalID)},e.translate=function(e,t,a){var n=2e3/180*e;return 0===e?t:a?t+n:t-n},e.toServo=function(t){for(var a=t.rightMiddle,n=t.rightFront,i=t.leftFront,o=t.leftMiddle,r=t.leftBack,s=t.rightBack,c={1:e.translate(i.alpha,X.alpha,!1),2:e.translate(i.beta,X.beta,!0),3:e.translate(i.gamma,X.gamma,!1),5:e.translate(o.alpha,Y.alpha,!1),6:e.translate(o.beta,Y.beta,!0),7:e.translate(o.gamma,Y.gamma,!1),9:e.translate(r.alpha,J.alpha,!1),10:e.translate(r.beta,J.beta,!0),11:e.translate(r.gamma,J.gamma,!1),21:e.translate(s.alpha,Q.alpha,!1),22:e.translate(s.beta,Q.beta,!1),23:e.translate(s.gamma,Q.gamma,!0),25:e.translate(a.alpha,$.alpha,!1),26:e.translate(a.beta,$.beta,!1),27:e.translate(a.gamma,$.gamma,!0),30:e.translate(n.alpha,Z.alpha,!1),31:e.translate(n.beta,Z.beta,!1),32:e.translate(n.gamma,Z.gamma,!0)},u=[],h=0,d=Object.entries(c);h<d.length;h++){var m=Object(l.a)(d[h],2),g=m[0],f=m[1];u.push("#".concat(g,"P").concat(f.toFixed()))}return u.push("T100"),u},e.animate=function(){var t=e.state,a=t.isForward,n=t.inWalkMode,i=ba(e.walkSequence),o=(e.state.animationCount+1)%i;e.setState({animationCount:o});var r=a?o:i-o,s=Math.max(0,Math.min(i-1,r)),l=ga(e.walkSequence,s),c=e.toServo(l).join("");if(ma.send(JSON.stringify(c)),n)e.onUpdate(l,e.currentTwist);else{var u=2*e.state.gaitParams.hipSwing/i,h=a?(e.currentTwist+u)%360:(e.currentTwist-u)%360;e.onUpdate(l,h)}},e.onUpdate=function(t,a){e.currentTwist=a;var n=e.props.params.dimensions,i=new Me(n,t,{wontRotate:!0});if(i&&i.body){var o=R(a);e.props.onUpdate(i.cloneTrot(o))}},e.setWalkSequence=function(t,a,n){var i=a?"tripod":"ripple",o=n?"walking":"rotating",r=e.props.params.dimensions,s=e.state.animationCount;e.walkSequence=da(r,t,i,o)||e.walkSequence;var l=ga(e.walkSequence,s);e.onUpdate(l,e.currentTwist),e.setState({gaitParams:t,isTripodGait:a,inWalkMode:n})},e.reset=function(){var t=e.state,a=t.isTripodGait,n=t.inWalkMode;e.currentTwist=0,e.setWalkSequence(ae,a,n)},e.updateGaitParams=function(t,a){var n=e.state,i=n.isTripodGait,o=n.inWalkMode,r=Object(s.a)(Object(s.a)({},e.state.gaitParams),{},Object(Ne.a)({},t,a));e.setWalkSequence(r,i,o)},e.toggleWalkMode=function(){var t=e.state,a=t.gaitParams,n=t.isTripodGait,i=!e.state.inWalkMode;e.setWalkSequence(a,n,i)},e.toggleGaitType=function(){var t=e.state,a=t.gaitParams,n=t.inWalkMode,i=!e.state.isTripodGait;e.setWalkSequence(a,i,n)},e.toggleWidgets=function(){return e.setState({showGaitWidgets:!e.state.showGaitWidgets})},e.toggleDirection=function(){return e.setState({isForward:!e.state.isForward})},e.toggleAnimating=function(){var t=!e.state.isAnimating;e.setState({isAnimating:t}),t?e.intervalID=setInterval(e.animate,150):clearInterval(e.intervalID)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=pa(this.animatingSwitch,this.widgetsSwitch),t=pa(this.gaitTypeSwitch,this.directionSwitch,this.rotateSwitch),a=this.state.showGaitWidgets,n=this.props.params.pose;return i.a.createElement(Gt,{title:i.a.createElement("h2",null,this.pageName),other:this.animationCount},e,i.a.createElement("div",{hidden:!a},t,this.sliders,i.a.createElement(Wt,{reset:this.reset})),i.a.createElement("div",{hidden:a},i.a.createElement(Yt,{pose:n})))}},{key:"widgetsSwitch",get:function(){var e=this.state.showGaitWidgets?"controlsShown":"poseShown";return fa("widgetSw",e,this.toggleWidgets)}},{key:"animatingSwitch",get:function(){var e=this.state.isAnimating?"PLAYING...":"...PAUSED. ";return fa("animatingSw",e,this.toggleAnimating)}},{key:"gaitTypeSwitch",get:function(){var e=this.state.isTripodGait?"tripodGait":"rippleGait";return fa("gaitSw",e,this.toggleGaitType)}},{key:"directionSwitch",get:function(){var e=this.state.isForward?"isForward":"isBackward";return fa("directionSw",e,this.toggleDirection)}},{key:"rotateSwitch",get:function(){var e=this.state.inWalkMode?"isWalk":"isRotate";return fa("rotateSw",e,this.toggleWalkMode)}},{key:"sliders",get:function(){var e=Ut({names:mt,values:this.state.gaitParams,rangeParams:vt,handleChange:this.updateGaitParams});return i.a.createElement("div",{className:"grid-cols-2"},e)}},{key:"animationCount",get:function(){var e=this.state,t=e.isAnimating,a=e.animationCount;return i.a.createElement("div",{className:"text",hidden:!t},a)}}]),a}(n.Component),ya=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).plot={cameraView:ie,data:ne,layout:re},e.state={inHexapodPage:!1,hexapodDimensions:q,hexapodPose:K,revision:0},e.onPageLoad=function(t){t!==at?(e.setState({inHexapodPage:!0}),e.updatePlot(e.state.hexapodDimensions,K)):e.setState({inHexapodPage:!1})},e.updatePlotWithHexapod=function(t){if(t&&t.foundSolution){var a=Xe(t,e.plot.cameraView),n=Object(l.a)(a,2),i=n[0],o=n[1];e.plot=Object(s.a)(Object(s.a)({},e.plot),{},{data:i,layout:o}),e.setState({revision:e.state.revision+1,hexapodDimensions:t.dimensions,hexapodPose:t.pose})}},e.logCameraView=function(t){e.plot.cameraView=t["scene.camera"]},e.updatePlot=function(t,a){var n=new Me(t,a);e.updatePlotWithHexapod(n)},e.updateDimensions=function(t){return e.updatePlot(t,e.state.hexapodPose)},e.updatePose=function(t){return e.updatePlot(e.state.hexapodDimensions,t)},e.hexapodPlot=function(){var t=e.state,a=t.revision,n=t.inHexapodPage,o=e.plot,r={data:o.data,layout:o.layout,revision:a,onRelayout:e.logCameraView};return i.a.createElement("div",{hidden:!n,className:"plot border"},i.a.createElement(Nt,r))},e.dimensions=function(){return i.a.createElement("div",{hidden:!e.state.inHexapodPage},i.a.createElement(Dt,{params:{dimensions:e.state.hexapodDimensions},onUpdate:e.updateDimensions}))},e.navDetailed=function(){return i.a.createElement("div",{hidden:!e.state.inHexapodPage},i.a.createElement(jt,null))},e.pageComponent=function(t,a,n){return i.a.createElement(t,{onMount:e.onPageLoad,onUpdate:a,params:n})},e.pageLanding=function(){return e.pageComponent($t)},e.pagePatterns=function(){return e.pageComponent(ea,e.updatePose)},e.pageIk=function(){return e.pageComponent(Zt,e.updatePlotWithHexapod,e.hexapodParams)},e.pageFk=function(){return e.pageComponent(Kt,e.updatePose,{pose:e.state.hexapodPose})},e.pageWalking=function(){return e.pageComponent(va,e.updatePlotWithHexapod,e.hexapodParams)},e.page=function(){return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/",exact:!0,component:e.pageLanding}),i.a.createElement(m.b,{path:xt.legPatterns.path,exact:!0,component:e.pagePatterns}),i.a.createElement(m.b,{path:xt.forwardKinematics.path,exact:!0,component:e.pageFk}),i.a.createElement(m.b,{path:xt.inverseKinematics.path,exact:!0,component:e.pageIk}),i.a.createElement(m.b,{path:xt.walkingGaits.path,exact:!0,component:e.pageWalking}),i.a.createElement(m.b,null,i.a.createElement(m.a,{to:"/"})))},e.render=function(){return i.a.createElement(g.a,null,i.a.createElement(Et,null),i.a.createElement("div",{className:"main content"},i.a.createElement("div",{className:"sidebar column-container cell"},e.dimensions(),e.page()),e.hexapodPlot()),e.navDetailed())},e}return Object(u.a)(a,[{key:"hexapodParams",get:function(){return{dimensions:this.state.hexapodDimensions,pose:this.state.hexapodPose}}}]),a}(i.a.Component),xa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function wa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ya,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");xa?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):wa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):wa(t,e)}))}}()},53:function(e,t,a){e.exports=a(144)},58:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.6e048089.chunk.js.map