(this["webpackJsonpreact-hexapod-sim"]=this["webpackJsonpreact-hexapod-sim"]||[]).push([[0],{145:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(47),r=n.n(o),s=(n(59),n(2)),c=n(6),l=n(3),u=n(5),h=n(10),d=n(9),m=n(7),f=n(26),g=n(37),p=["bodyContactPoint","coxiaPoint","femurPoint","footTipPoint"],v={rightMiddle:0,rightFront:1,leftFront:2,leftMiddle:3,leftBack:4,rightBack:5},b=["rightMiddle","rightFront","leftFront","leftMiddle","leftBack","rightBack"],y=90,x={rightMiddle:0,rightFront:45,leftFront:135,leftMiddle:180,leftBack:225,rightBack:315},P={rightMiddle:!1,rightFront:!1,leftFront:!0,leftMiddle:!0,leftBack:!0,rightBack:!1},w=function(){function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"no-name-point",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"no-id-point";Object(l.a)(this,e),this.x=t,this.y=n,this.z=a,this.name=i,this.id=o}return Object(u.a)(e,[{key:"newTrot",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed-point",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"no-id",i=t.slice(0,3),o=Object(c.a)(i,3),r=o[0],s=o[1],l=o[2],u=Object(c.a)(r,4),h=u[0],d=u[1],m=u[2],f=u[3],g=Object(c.a)(s,4),p=g[0],v=g[1],b=g[2],y=g[3],x=Object(c.a)(l,4),P=x[0],w=x[1],O=x[2],k=x[3],j=this.x*h+this.y*d+this.z*m+f,S=this.x*p+this.y*v+this.z*b+y,E=this.x*P+this.y*w+this.z*O+k;return new e(j,S,E,n,a)}},{key:"cloneTrot",value:function(e){return this.newTrot(e,this.name,this.id)}},{key:"cloneShift",value:function(t,n,a){return new e(this.x+t,this.y+n,this.z+a,this.name,this.id)}},{key:"cloneTrotShift",value:function(e,t,n,a){return this.cloneTrot(e).cloneShift(t,n,a)}},{key:"toMarkdownString",value:function(){var e=this.x.toFixed(2),t=this.y.toFixed(2),n=this.z.toFixed(2);return"".concat(this.name,"\n\n(x: ").concat(e,", y: ").concat(t,", z: ").concat(n,")")}}]),e}(),O=function(e){return 180*e/Math.PI},k=function(e){return e*Math.PI/180},j=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},S=function(e){return Math.sqrt(j(e,e))},E=function(e,t,n){return j(e,M(t,n))>0},T=function(e,t){return new w(t.x-e.x,t.y-e.y,t.z-e.z)},z=function(e,t){return new w(t*e.x,t*e.y,t*e.z)},M=function(e,t){var n=e.y*t.z-e.z*t.y,a=e.z*t.x-e.x*t.z,i=e.x*t.y-e.y*t.x;return new w(n,a,i)},N=function(e,t,n){var a=T(e,t),i=T(e,n),o=M(a,i),r=S(o);return z(o,1/r)},F=function(e){var t=Math.acos(e);return isNaN(t)?0:O(t)},C=function(e,t,n){return 0===e||0===t?null:F((e*e+t*t-n*n)/(2*e*t))},A=function(e,t){if(0===S(e)||0===S(t))return 0;var n=j(e,t)/Math.sqrt(j(e,e)*j(t,t));return F(n)},L=function(e){return[Math.sin(k(e)),Math.cos(k(e))]},V=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],_=function(e){var t=[e,e,e,e];return[t.slice(),t.slice(),t.slice(),t.slice()]},G=function(e,t){return e+t},B=function(e,t){return e*t},W=function(e,t,n){for(var a=_(null),i=0;i<4;i++)for(var o=0;o<4;o++)a[i][o]=n.call(null,e[i][o],t[i][o]);return a},D=function(e,t){return W(e,t,G)},I=function(e,t){for(var n=_(null),a=0;a<4;a++)for(var i=0;i<4;i++)n[a][i]=e[a][0]*t[0][i]+e[a][1]*t[1][i]+e[a][2]*t[2][i]+e[a][3]*t[3][i];return n};function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=L(e),o=Object(c.a)(i,2),r=o[0],s=o[1];return[[s,0,r,t],[0,1,0,n],[-r,0,s,a],[0,0,0,1]]}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=L(e),o=Object(c.a)(i,2),r=o[0],s=o[1];return[[s,-r,0,t],[r,s,0,n],[0,0,1,a],[0,0,0,1]]}var U=function(e,t,n){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=L(e),o=Object(c.a)(i,2),r=o[0],s=o[1];return[[1,0,0,t],[0,s,-r,n],[0,r,s,a],[0,0,0,1]]}(e),i=H(t),o=R(n),r=I(a,i);return I(r,o)},q=function(e,t){var n=M(e,t),a=S(n);if(0===a)return V;var i,o=j(e,t),r=[[0,-(i=n).z,i.y,0],[i.z,0,-i.x,0],[-i.y,i.x,0,0],[0,0,0,1]],s=(1-o)/(a*a),c=I(r,r),l=_(s),u=W(c,l,B),h=D(V,r);return D(h,u)},K={front:110,side:160,middle:160,coxia:35,femur:85,tibia:120},X={leftFront:{alpha:0,beta:0,gamma:0},rightFront:{alpha:0,beta:0,gamma:0},leftMiddle:{alpha:0,beta:0,gamma:0},rightMiddle:{alpha:0,beta:0,gamma:0},leftBack:{alpha:0,beta:0,gamma:0},rightBack:{alpha:0,beta:0,gamma:0}},Y={alpha:0,beta:0,gamma:0},Z={tx:0,ty:0,tz:0,rx:0,ry:0,rz:0,hipStance:0,legStance:0},J={tx:0,tz:0,rx:0,ry:0,legStance:0,hipStance:20,hipSwing:25,liftSwing:40,stepCount:5},$=[{name:"bodyMesh",showlegend:!0,type:"mesh3d",opacity:.3,color:"#ff6348",x:[100,100,-100,-100,-100,100,100],y:[0,100,100,0,-100,-100,0],z:[100,100,100,100,100,100,100]},{line:{color:"#FC427B",opacity:1,width:12},name:"bodyOutline",showlegend:!0,type:"scatter3d",x:[100,100,-100,-100,-100,100,100],y:[0,100,100,0,-100,-100,0],z:[100,100,100,100,100,100,100]},{marker:{color:"#FC427B",opacity:1,size:14},mode:"markers",name:"head",type:"scatter3d",x:[0],y:[100],z:[100]},{marker:{color:"#32ff7e",opacity:1,size:14},mode:"markers",name:"centerOfGravity",type:"scatter3d",x:[0],y:[0],z:[100]},{marker:{color:"#32ff7e",opacity:.5,size:7},mode:"markers",name:"centerOfGravityProjection",type:"scatter3d",x:[0],y:[0],z:[0]},{line:{color:"#EE5A24",width:10},name:"rightMiddleLeg",showlegend:!1,type:"scatter3d",x:[100,200,300,300],y:[0,0,0,0],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"rightFrontLeg",showlegend:!1,type:"scatter3d",x:[100,170.71067811865476,241.4213562373095,241.4213562373095],y:[100,170.71067811865476,241.42135623730948,241.42135623730948],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"leftFrontLeg",showlegend:!1,type:"scatter3d",x:[-100,-170.71067811865476,-241.42135623730948,-241.42135623730948],y:[100,170.71067811865476,241.4213562373095,241.4213562373095],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"leftMiddleLeg",showlegend:!1,type:"scatter3d",x:[-100,-200,-300,-300],y:[0,12246467991473532e-30,24492935982947064e-30,24492935982947064e-30],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"leftBackLeg",showlegend:!1,type:"scatter3d",x:[-100,-170.71067811865476,-241.42135623730954,-241.42135623730954],y:[-100,-170.71067811865476,-241.42135623730948,-241.42135623730948],z:[100,100,100,0]},{line:{color:"#EE5A24",width:10},name:"rightBackLeg",showlegend:!1,type:"scatter3d",x:[100,170.71067811865476,241.42135623730948,241.42135623730948],y:[-100,-170.71067811865476,-241.42135623730954,-241.42135623730954],z:[100,100,100,0]},{name:"supportPolygonMesh",showlegend:!0,type:"mesh3d",opacity:.2,color:"#3c6382",x:[300,241.4213562373095,-241.42135623730948,-300,-241.42135623730954,241.42135623730948],y:[0,241.42135623730948,241.4213562373095,24492935982947064e-30,-241.42135623730948,-241.42135623730954],z:[0,0,0,0,0,0]},{line:{color:"#2f3640",width:2},name:"hexapodXaxis",mode:"lines",showlegend:!1,opacity:1,type:"scatter3d",x:[0,50],y:[0,0],z:[100,100]},{line:{color:"#e67e22",width:2},name:"hexapodYaxis",mode:"lines",showlegend:!1,opacity:1,type:"scatter3d",x:[0,0],y:[0,50],z:[100,100]},{line:{color:"#0097e6",width:2},name:"hexapodZaxis",mode:"lines",showlegend:!1,opacity:1,type:"scatter3d",x:[0,0],y:[0,0],z:[100,150]},{line:{color:"#2f3640",width:2},name:"worldXaxis",showlegend:!1,mode:"lines",opacity:1,type:"scatter3d",x:[0,50],y:[0,0],z:[0,0]},{line:{color:"#e67e22",width:2},name:"worldYaxis",showlegend:!1,mode:"lines",opacity:1,type:"scatter3d",x:[0,0],y:[0,50],z:[0,0]},{line:{color:"#0097e6",width:2},name:"worldZaxis",showlegend:!1,mode:"lines",opacity:1,type:"scatter3d",x:[0,0],y:[0,0],z:[0,50]}],Q={center:{x:.0005967195135552272,y:.11455181630825005,z:-.44957387699746415},eye:{x:.010119765679525836,y:.573601223004958,z:.04247372257492105},up:{x:.006592638138864914,y:3338632363222382e-20,z:.9999782677677168}},ee={xaxis:{nticks:1,range:[-600,600],zerolinecolor:"#079992",showbackground:!1},yaxis:{nticks:1,range:[-600,600],zerolinecolor:"#079992",showbackground:!1},zaxis:{nticks:1,range:[-10,590],zerolinecolor:"#079992",showbackground:!0,backgroundcolor:"#0a3d62"},aspectmode:"manual",aspectratio:{x:1,y:1,z:1},camera:Q},te={scene:ee,margin:{b:20,l:10,r:10,t:20},paper_bgcolor:"#222f3e",legend:{x:0,y:0,bgcolor:"rgba(44, 62, 80, 0.8)",font:{family:"courier",size:12,color:"#2ecc71"}},showlegend:!1,autosize:!0},ne=n(4),ae=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hasNoPoints:!1};if(Object(l.a)(this,e),this.dimensions=t,!n.hasNoPoints){var a=this.dimensions,i=a.front,o=a.middle,r=a.side,s=[o,i,-i,-o,-i,i],c=[0,r,r,0,-r,-r];this.verticesList=b.map((function(e,t){return new w(s[t],c[t],0,"".concat(e,"Vertex"),t)})),this.head=new w(0,r,0,"headPoint",7),this.cog=new w(0,0,0,"centerOfGravityPoint",6)}}return Object(u.a)(e,[{key:"cloneTrotShift",value:function(e,t,n,a){return this._doTransform("cloneTrotShift",e,t,n,a)}},{key:"cloneTrot",value:function(e){return this._doTransform("cloneTrot",e)}},{key:"cloneShift",value:function(e,t,n){return this._doTransform("cloneShift",e,t,n)}},{key:"_doTransform",value:function(t){for(var n,a,i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];var s=new e(this.dimensions,{hasNoPoints:!0});return s.cog=(n=this.cog)[t].apply(n,o),s.head=(a=this.head)[t].apply(a,o),s.verticesList=this.verticesList.map((function(e){return e[t].apply(e,o)})),s}},{key:"closedPointsList",get:function(){return[].concat(Object(ne.a)(this.verticesList),[this.verticesList[0]])}},{key:"allPointsList",get:function(){return[].concat(Object(ne.a)(this.verticesList),[this.cog,this.head])}}]),e}(),ie=function(){function e(t,n){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{alpha:0,beta:0,gamma:0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{hasNoPoints:!1};Object(l.a)(this,e),this._buildNameId=function(e,t){return{name:"".concat(a.position,"-").concat(e),id:"".concat(a.id,"-").concat(t)}},this._buildPointNameIds=function(){return p.map((function(e,t){return a._buildNameId(e,t)}))},Object.assign(this,{dimensions:t,pose:o,position:n}),r.hasNoPoints||(this.allPointsList=this._computePoints(o,i))}return Object(u.a)(e,[{key:"cloneTrotShift",value:function(e,t,n,a){return this._doTransform("cloneTrotShift",e,t,n,a)}},{key:"cloneTrot",value:function(e){return this._doTransform("cloneTrot",e)}},{key:"cloneShift",value:function(e,t,n){return this._doTransform("cloneShift",e,t,n)}},{key:"_doTransform",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=this.allPointsList.map((function(t){return t[e].apply(t,n)}));return this._buildClone(i)}},{key:"_buildClone",value:function(t){var n=new e(this.dimensions,this.position,this.bodyContactPoint,this.pose,{hasNoPoints:!0});return n.allPointsList=t,n}},{key:"_computePointsWrtBodyContact",value:function(e,t){var n=H(-e,this.dimensions.coxia,0,0),a=H(90-t,this.dimensions.femur,0,0),i=H(0,this.dimensions.tibia,0,0),o=I(n,a),r=I(o,i),s=new w(0,0,0);return[s,s.cloneTrot(n),s.cloneTrot(o),s.cloneTrot(r)]}},{key:"_computePointsWrtHexapodCog",value:function(e,t,n,a){var i=R(x[this.position]+e,t.x,t.y,t.z);return n.map((function(e,t){var n=a[t].name,o=a[t].id;return e.newTrot(i,n,o)}))}},{key:"_computePoints",value:function(e,t){var n=e.alpha,a=e.beta,i=e.gamma,o=this._buildPointNameIds(),r=this._computePointsWrtBodyContact(a,i);return this._computePointsWrtHexapodCog(n,t,r,o)}},{key:"bodyContactPoint",get:function(){return this.allPointsList[0]}},{key:"coxiaPoint",get:function(){return this.allPointsList[1]}},{key:"femurPoint",get:function(){return this.allPointsList[2]}},{key:"footTipPoint",get:function(){return this.allPointsList[3]}},{key:"id",get:function(){return v[this.position]}},{key:"name",get:function(){return"".concat(this.position,"Leg")}},{key:"maybeGroundContactPoint",get:function(){var e=this.allPointsList.slice().reverse(),t=e[0];return e.reduce((function(e,t){return t.z<e.z?t:e}),t)}}]),e}(),oe=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return-j(t,e)>n+a},re=function(e,t,n){return e.reduce((function(e,a){return a.allPointsList.slice(1).reverse().some((function(e){return se(e,t,n)}))?[].concat(Object(ne.a)(e),[a]):e}),[])},se=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=-j(t,e);return Math.abs(n-i)<=a},ce=[[0,1,3],[0,1,4],[0,2,3],[0,2,4],[0,2,5],[0,3,4],[0,3,5],[1,2,4],[1,2,5],[1,3,4],[1,3,5],[1,4,5],[2,3,5],[2,4,5]],le=[[0,1,2],[1,2,3],[2,3,4],[3,4,5],[0,4,5],[0,1,5]],ue=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,i=new w(0,0,0),o=T(e,t),r=T(e,n),s=T(e,i),c=M(o,r),l=j(c,c),u=j(M(o,s),c)/l,h=j(M(s,r),c)/l,d=1-u-h,m=-a,f=1+a,g=m<=d&&d<=f,p=m<=u&&u<=f,v=m<=h&&h<=f;return g&&p&&v},he=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e},de=function(){for(var e=[],t=3;t>0;t--)for(var n=3;n>0;n--)for(var a=3;a>0;a--)e.push([t,n,a]);return e}(),me=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shuffle:!1},n=t.shuffle?he(ce.slice()):ce,a=[].concat(Object(ne.a)(n),Object(ne.a)(le)),i=null,o=0;o<a.length;o++)for(var r=a[o],s=ge(r,e),l=s.threeLegs,u=s.otherThreeLegs,h=0;h<de.length;h++){var d=de[h],m=fe(l,d),f=Object(c.a)(m,3),g=f[0],p=f[1],v=f[2];if(ue(g,p,v)){var b=N(g,p,v),y=-j(b,g);if(!pe(l,d,b,y)&&!ve(u,b,y)){if(0!==y){var x=re(e,b,y);return{nAxis:b,height:y,groundLegsNoGravity:x}}null===i&&(i={p0:g,p1:p,p2:v,normal:b,height:y})}}}return null===i?null:{nAxis:i.normal,height:i.height,groundLegsNoGravity:re(e,i.normal,i.height)}},fe=function(e,t){return e.map((function(e,n){var a=t[n];return e.allPointsList[a]}))},ge=function(e,t){return{threeLegs:e.map((function(e){return t[e]})),otherThreeLegs:Object(ne.a)(Array(6).keys()).filter((function(t){return!e.includes(t)})).map((function(e){return t[e]}))}},pe=function(e,t,n,a){for(var i=function(i){var o=[e[i],t[i]],r=o[1];if(o[0].allPointsList.some((function(e,t){return 0!==t&&t!==r&&oe(e,n,a)})))return{v:!0}},o=0;o<3;o++){var r=i(o);if("object"===typeof r)return r.v}return!1},ve=function(e,t,n){for(var a=0;a<3;a++){if(e[a].allPointsList.slice(1).some((function(e){return oe(e,t,n)})))return!0}return!1},be=[].concat(Object(ne.a)(ce),Object(ne.a)(le)),ye=function(e){var t=xe(e);if(null===t)return null;var n=re(e,t.normal,t.height);return{nAxis:t.normal,height:t.height,groundLegsNoGravity:n}},xe=function(e){for(var t=e.map((function(e){return e.maybeGroundContactPoint})),n=function(e){var n=be[e],a=n.map((function(e){return t[e]})),i=Object(c.a)(a,3),o=i[0],r=i[1],s=i[2];if(!ue(o,r,s))return"continue";var l=N(o,r,s),u=-j(l,o);return Object(ne.a)(Array(6).keys()).filter((function(e){return!n.includes(e)})).map((function(e){return t[e]})).every((function(e){return!oe(e,l,u)}))?{v:{normal:l,height:u}}:void 0},a=0;a<be.length;a++){var i=n(a);if("continue"!==i&&"object"===typeof i)return i.v}return null},Pe=function(e){for(var t=0,n=0,a=0;a<e.length;a++){var i=e[a],o="footTipPoint"===i.maybeGroundContactPoint.name.split("-")[1],r=0!==i.pose.alpha;o&&r&&(i.pose.alpha>0?n++:t++)}return n>=3||t>=3},we=function(e){var t=e[0];if(!e.every((function(e){return e.pose.alpha===t.pose.alpha})))return 0;var n=e.map((function(e){return e.maybeGroundContactPoint.name.split("-")[1]})),a=n[0];if(!n.every((function(e){return e===a})))return 0;if(["coxiaPoint","bodyContactPoint"].includes(a))return 0;if("femurPoint"===a&&t.bodyContactPoint.z===t.femurPoint.z)return 0;return-t.pose.alpha},Oe={xAxis:new w(1,0,0,"hexapodXaxis"),yAxis:new w(0,1,0,"hexapodYaxis"),zAxis:new w(0,0,1,"hexapodZaxis")},ke=function(e,t){return{xAxis:e.xAxis.cloneTrot(t),yAxis:e.yAxis.cloneTrot(t),zAxis:e.zAxis.cloneTrot(t)}},je=function(e,t,n){return b.map((function(a,i){return new ie(n,a,e[i],t[a])}))},Se=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasNoPoints:!1,assumeKnownGroundPoints:!1,wontRotate:!1};if(Object(l.a)(this,e),Object.assign(this,{dimensions:t,pose:n}),!a.hasNoPoints){var i=new ae(this.bodyDimensions),o=je(i.verticesList,this.pose,this.legDimensions),r=a.assumeKnownGroundPoints?ye(o):me(o);if(null!==r){this.foundSolution=!0,this.legPositionsOnGround=r.groundLegsNoGravity.map((function(e){return e.position}));var s=q(r.nAxis,Oe.zAxis);if(this.legs=o.map((function(e){return e.cloneTrotShift(s,0,0,r.height)})),this.body=i.cloneTrotShift(s,0,0,r.height),this.localAxes=ke(Oe,s),!a.wontRotate&&!this.legs.every((function(e){return 0===e.pose.alpha}))){var c=we(r.groundLegsNoGravity);0===this.maybeTwistAngle?Pe(r.groundLegsNoGravity)&&this._handleComplexTwist(i.verticesList):this._twist(c)}}else this.foundSolution=!1}}return Object(u.a)(e,[{key:"cloneTrot",value:function(e){var t=this.body.cloneTrot(e),n=this.legs.map((function(t){return t.cloneTrot(e)})),a=ke(this.localAxes,e);return this._buildClone(t,n,a)}},{key:"cloneShift",value:function(e,t,n){var a=this.body.cloneShift(e,t,n),i=this.legs.map((function(a){return a.cloneShift(e,t,n)}));return this._buildClone(a,i,this.localAxes)}},{key:"_buildClone",value:function(t,n,a){var i=new e(this.dimensions,this.pose,{hasNoPoints:!0});return Object.assign(i,{body:t,legs:n,localAxes:a,legPositionsOnGround:this.legPositionsOnGround,foundSolution:this.foundSolution}),i}},{key:"_handleComplexTwist",value:function(e){var t=this,n=je(e,X,this.legDimensions).map((function(e){return e.cloneShift(0,0,t.dimensions.tibia).maybeGroundContactPoint}));0!==function(e,t){var n=e.find((function(e){return"footTipPoint"===e.name.split("-")[1]}));if(void 0===n)return 0;var a=n.name.split("-")[0],i=t[v[a]],o=Math.atan2(i.y,i.x)-Math.atan2(i.y,i.x);return O(o)}(this.groundContactPoints,n)&&this._twist()}},{key:"_twist",value:function(e){var t=R(e);this.body=this.body.cloneTrot(t),this.legs=this.legs.map((function(e){return e.cloneTrot(t)})),this.localAxes=ke(this.localAxes,t)}},{key:"_danglingHexapod",value:function(e,t){this.body=e,this.legs=t,this.localAxes=Oe,this.legPositionsOnGround=[]}},{key:"distanceFromGround",get:function(){return this.body.cog.z}},{key:"cogProjection",get:function(){return new w(this.body.cog.x,this.body.cog.y,0,"centerOfGravityProjectionPoint")}},{key:"info",get:function(){return this.foundSolution?{isAlert:!1,subject:"Success!",body:"Stable orientation found."}:{isAlert:!0,subject:"Unstable position.",body:"error in solving for orientation "}}},{key:"bodyDimensions",get:function(){var e=this.dimensions;return{front:e.front,middle:e.middle,side:e.side}}},{key:"legDimensions",get:function(){var e=this.dimensions;return{coxia:e.coxia,femur:e.femur,tibia:e.tibia}}},{key:"groundContactPoints",get:function(){var e=this;return this.legPositionsOnGround.map((function(t){var n=v[t];return e.legs[n].maybeGroundContactPoint}))}}]),e}(),Ee=n(11),Te=function e(){Object(l.a)(this,e)};Te.success={subject:"Success.",body:"All legs are on the floor."},Te.successLegsOnAir=function(e){return{subject:"Success.",body:"But some legs won't reach target points on the ground:\n".concat(Te.bulletPoints(e))}},Te.noSupport=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{listLegs:!1};return{subject:"Failure: No Support.",body:"".concat(e,"\n").concat(n.listLegs?Te.bulletPoints(t):"")}},Te.badPoint=function(e){return{subject:"Failure: Bad Point.",body:"At least one point would be shoved to the ground:\n".concat(e.toMarkdownString())}},Te.bulletPoints=function(e){return e.reduce((function(e,t){return e+" - ".concat(t,"\n")}),"")},Te.badLeg=function(e){return{subject:"Failure: Bad leg.",body:e}},Te.alphaNotInRange=function(e,t,n){return{subject:"Failure: Alpha not within range",body:"The alpha (".concat(t,") computed for ").concat(e," leg is not within -").concat(n," < alpha < ").concat(n)}},Te.initialized={subject:"Initialized",body:"Has not solved for anything yet."};var ze=function e(){Object(l.a)(this,e)};ze.targetReached=function(e){return{legPosition:e,message:"Success! (".concat(e,")"),obtainedSolution:!0,reachedTarget:!0}},ze.targetNotReached=function(e){return{legPosition:e,message:"Success! But this leg won't reach the target ground point. (".concat(e,")"),obtainedSolution:!0,reachedTarget:!1}},ze.blocked=function(e){return{legPosition:e,message:"Failure. The ground is blocking the path. The target point can only be reached it by digging the ground. (".concat(e,")"),obtainedSolution:!1,reachedTarget:!0}},ze.femurTooLong=function(e){return{legPosition:e,message:"Failure. Femur length too long. (".concat(e,")"),obtainedSolution:!1,reachedTarget:!1}},ze.tibiaTooLong=function(e){return{legPosition:e,message:"Failure. Tibia length too long. (".concat(e,")"),obtainedSolution:!1,reachedTarget:!1}},ze.initialized=function(e){return{legPosition:e,obtainedSolution:!1,reachedTarget:!1,message:"Haven't solved anything yet. (".concat(e,")")}};var Me=function(){function e(t){Object(l.a)(this,e),this.vectors={legXaxis:new w(1,0,0,"legXaxis"),parsVector:null},this.points={bodyContactPoint:null,coxiaPoint:null,targetFootTipPoint:null},this.dimensions={coxia:0,femur:0,tibia:0,summa:0,pars:0},this.angles={beta:null,gamma:null,rho:null},this.info=ze.initialized(t)}return Object(u.a)(e,[{key:"solve",value:function(e,t,n,a,i){this.angles.rho=i,this.dimensions={coxia:e,femur:t,tibia:n,summa:a};var o,r,c,l=new w(e,0,0,"coxiaPoint"),u=this._computeTargetFootTipPoint(),h=T(l,u),d=S(h);return this.dimensions.pars=d,this.points=Object(s.a)(Object(s.a)({},this.points),{},{coxiaPoint:l,targetFootTipPoint:u}),this.vectors=Object(s.a)(Object(s.a)({},this.vectors),{},{parsVector:h}),(o=d)+(r=t)>(c=n)&&o+c>r&&r+c>o?this._handleCaseTriangleCanForm():this._handleEdgeCase(),this}},{key:"_computeTargetFootTipPoint",value:function(){var e=[this.dimensions.summa,this.angles.rho],t=e[0],n=e[1],a=t*Math.cos(k(n)),i=-t*Math.sin(k(n));return new w(a,0,i,"targetLocalFootTipPoint")}},{key:"_handleCaseTriangleCanForm",value:function(){var e=this.dimensions,t=e.femur,n=e.pars,a=e.tibia,i=this.vectors,o=i.parsVector,r=i.legXaxis,s=this.points.targetFootTipPoint,c=C(t,n,a),l=A(o,r),u=s.z<0?c-l:c+l,h=C(t,a,n),d=t*Math.sin(k(u));this.angles.beta=u,s.z>d?this.info=ze.blocked(this.legPosition):(this.angles.gamma=h-90,this.info=ze.targetReached(this.legPosition))}},{key:"_handleEdgeCase",value:function(){var e=this.dimensions,t=e.pars,n=e.tibia,a=e.femur;if(t+n<a)this.info=ze.femurTooLong(this.legPosition);else{if(t+a<n)return console.log(this.info.legPosition),void(this.info=ze.tibiaTooLong(this.legPosition));var i=this.vectors,o=i.parsVector,r=i.legXaxis;this.angles=Object(s.a)(Object(s.a)({},this.angles),{},{beta:-A(o,r),gamma:90}),this.info=ze.targetNotReached(this.legPosition)}}},{key:"legPosition",get:function(){return this.info.legPosition}},{key:"beta",get:function(){return this.angles.beta}},{key:"gamma",get:function(){return this.angles.gamma}},{key:"obtainedSolution",get:function(){return this.info.obtainedSolution}},{key:"reachedTarget",get:function(){return this.info.reachedTarget}},{key:"message",get:function(){return this.info.message}}]),e}(),Ne=function e(){Object(l.a)(this,e)};Ne.reason={MIGHT_BE_STABLE_LESS:"Might be stable.\nLess than three known legs are off the ground.",TOO_MANY_LEGS_OFF:"Definitely Unstable.\nToo many legs off the floor.",RIGHT_LEGS_OFF:"Definitely Unstable.\nAll right legs are off the floor.",LEFT_LEGS_OFF:"Definitely Unstable.\nAll left legs are off the floor.",MIGHT_BE_STABLE_MORE:"Might be stable.\nThree known legs are off the ground.\nOne is on opposite side of the other two."},Ne.checkSupport=function(e){var t=Ne.reason;if(e.length<3)return[!1,t.MIGHT_BE_STABLE_LESS];if(e.length>=4)return[!0,t.TOO_MANY_LEGS_OFF];var n=e.map((function(e){return P[e]}));return n.every((function(e){return!e}))?[!0,t.RIGHT_LEGS_OFF]:n.every((function(e){return e}))?[!0,t.LEFT_LEGS_OFF]:[!1,t.MIGHT_BE_STABLE_MORE]};var Fe=Ne,Ce=function(){function e(){Object(l.a)(this,e),this.params={},this.partialPose={},this.pose={},this.foundSolution=!1,this.legPositionsOffGround=[],this.message=Te.initialized}return Object(u.a)(e,[{key:"solve",value:function(e,t,n,a){if(this.params={bodyContactPoints:t,groundContactPoints:n,axes:a,legDimensions:e},this._hasBadVertex(t))return this;for(var i=e.coxia,o=e.femur,r=e.tibia,s=0;s<6;s++){var c=b[s],l=Ae(t[s],n[s],a.zAxis);if(l.coxiaPoint.z<0)return this._handleBadPoint(l.coxiaPoint),this;var u=x[c],h=Le(l.coxiaUnitVector,u,a.xAxis,a.zAxis);if(Math.abs(h)>y)return this._finalizeFailure(Te.alphaNotInRange(c,h,y)),this;var d=new Me(c).solve(i,o,r,l.summa,l.rho);if(!d.obtainedSolution)return this._finalizeFailure(Te.badLeg(d.message)),this;if(!d.reachedTarget&&this._hasNoMoreSupport(c))return this;this.partialPose[c]={alpha:h,beta:d.beta,gamma:d.gamma}}return this._finalizeSuccess(),this}},{key:"_hasNoMoreSupport",value:function(e){this.legPositionsOffGround.push(e);var t=Fe.checkSupport(this.legPositionsOffGround),n=Object(c.a)(t,2),a=n[0],i=n[1];if(a){var o=Te.noSupport(i,this.legPositionsOffGround);return this._finalizeFailure(o),!0}return!1}},{key:"_handleBadPoint",value:function(e){this._finalizeFailure(Te.badPoint(e))}},{key:"_hasBadVertex",value:function(e){for(var t=0;t<6;t++){var n=e[t];if(n.z<0)return this._handleBadPoint(n),!0}return!1}},{key:"_finalizeFailure",value:function(e){this.message=e,this.foundSolution=!1}},{key:"_finalizeSuccess",value:function(){this.pose=this.partialPose,this.foundSolution=!0,this.hasLegsOffGround?this.message=Te.successLegsOnAir(this.legPositionsOffGround):this.message=Te.success}},{key:"hasLegsOffGround",get:function(){return this.legPositionsOffGround.length>0}}]),e}(),Ae=function(e,t,n,a){var i,o,r,s=T(e,t),c=function(e,t){var n=j(e,t)/j(t,t),a=z(t,n);return T(a,e)}(s,n),l=z(i=c,1/S(i)),u=z(l,a);return{coxiaUnitVector:l,coxiaVector:u,coxiaPoint:(r=u,new w((o=e).x+r.x,o.y+r.y,o.z+r.z)),rho:A(l,s),summa:S(s)}},Le=function(e,t,n,a){var i=((E(e,n,a)?-1:1)*A(e,n)-t)%360;return i>180?i-360:i<-180?i+360:180===i||-180===i?0:i},Ve=Ce,_e=function(e,t,n){var a=Ge(e,t),i=a.tVec,o=a.rotMatrix,r=a.startPose,s=new Se(e,r),c=Be(s,o,i,{rotateThenShift:n});return[(new Ve).solve(s.legDimensions,c.bodyContactPoints,c.groundContactPoints,c.axes),c.groundContactPoints]},Ge=function(e,t){var n,a=(n=t,Object.entries(n).reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(s.a)(Object(s.a)({},e),{},Object(Ee.a)({},a,Number(i)))}),{})),i=e.middle,o=e.side,r=e.tibia,l=function(e,t,n,a,i,o){return new w(e*a,t*i,n*o)}(a.tx,a.ty,a.tz,i,o,r),u=function(e,t){var n={beta:t,gamma:-t};return[0,-e,e,0,-e,e].reduce((function(e,t,a){return e[b[a]]=Object(s.a)({alpha:t},n),e}),{})}(a.hipStance,a.legStance),h=a.rx,d=a.ry,m=a.rz;return{tVec:l,startPose:u,rotMatrix:U(h,d,m)}},Be=function(e,t,n,a){var i=a.rotateThenShift;return{groundContactPoints:e.legs.map((function(e){return e.maybeGroundContactPoint})),bodyContactPoints:i?e.body.cloneTrot(t).cloneShift(n.x,n.y,n.z).verticesList:e.body.cloneShift(n.x,n.y,n.z).cloneTrot(t).verticesList,axes:{xAxis:new w(1,0,0).cloneTrot(t),zAxis:new w(0,0,1).cloneTrot(t)}}},We=function(e,t,n){var a=T(t.target,n.target),i=T(t.current,n.current),o=A(i,a),r=R(E(i,a,new w(0,0,1))?o:-o),s=t.current.cloneTrot(r),c=T(s,t.target);return e.cloneTrot(r).cloneShift(c.x,c.y,0)},De=function(e,t,n){for(var a=t.reduce((function(e,t){return e[t.name]=t,e}),{}),i=Object.keys(a),o=null,r=null,s=null,c=null,l=0;l<e.length;l++){var u=e[l],h=u.name;if(!n.includes(h)&&i.includes(h)){if(null!==o){r=u,c=a[h];break}o=u,s=a[h]}}return null===r?{foundTwoPoints:!1}:{points1:{target:s,current:o},points2:{target:c,current:r},foundTwoPoints:!0}},Ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{rotateThenShift:!0},a=_e(e,t,n.rotateThenShift),i=Object(c.a)(a,2),o=i[0],r=i[1];if(!o.foundSolution)return{pose:null,obtainedSolution:!1,message:o.message,hexapod:null};var s=new Se(e,o.pose),l=o.legPositionsOffGround,u=De(s.groundContactPoints,r,l),h=u.foundTwoPoints?We(s,u.points1,u.points2):s;return{pose:o.pose,obtainedSolution:!0,message:o.message,hexapod:h}},He=function(e,t){var n=function(e){var t=e.body.closedPointsList,n=t.map((function(e){return e.x})),a=t.map((function(e){return e.y})),i=t.map((function(e){return e.z})),o=e.body,r=o.head,c=o.cog,l=e.cogProjection,u=e.legs,h=e.groundContactPoints,d=Object(s.a)(Object(s.a)({},$[0]),{},{x:n,y:a,z:i}),m=Object(s.a)(Object(s.a)({},$[1]),{},{x:n,y:a,z:i}),f=Object(s.a)(Object(s.a)({},$[2]),{},{x:[r.x],y:[r.y],z:[r.z]}),g=Object(s.a)(Object(s.a)({},$[3]),{},{x:[c.x],y:[c.y],z:[c.z]}),p=Object(s.a)(Object(s.a)({},$[4]),{},{x:[l.x],y:[l.y],z:[l.z]}),v=u.map((function(e,t){return Object(s.a)(Object(s.a)({},$[t+5]),{},{x:e.allPointsList.map((function(e){return e.x})),y:e.allPointsList.map((function(e){return e.y})),z:e.allPointsList.map((function(e){return e.z}))})})),b=Object(s.a)(Object(s.a)({},$[11]),{},{x:h.map((function(e){return e.x})),y:h.map((function(e){return e.y})),z:h.map((function(e){return e.z}))}),y=e.body.dimensions.front/2,x=e.localAxes,P=x.xAxis,w=x.yAxis,O=x.zAxis,k=Object(s.a)(Object(s.a)({},$[12]),{},{x:[c.x,c.x+y*P.x],y:[c.y,c.y+y*P.y],z:[c.z,c.z+y*P.z]}),j=Object(s.a)(Object(s.a)({},$[13]),{},{x:[c.x,c.x+y*w.x],y:[c.y,c.y+y*w.y],z:[c.z,c.z+y*w.z]}),S=Object(s.a)(Object(s.a)({},$[14]),{},{x:[c.x,c.x+y*O.x],y:[c.y,c.y+y*O.y],z:[c.z,c.z+y*O.z]}),E=Object(s.a)(Object(s.a)({},$[15]),{},{x:[0,y]}),T=Object(s.a)(Object(s.a)({},$[16]),{},{y:[0,y]}),z=Object(s.a)(Object(s.a)({},$[17]),{},{z:[0,y]});return[d,m,f,g,p].concat(Object(ne.a)(v),[b,k,j,S,E,T,z])}(e);[null,void 0,{}].includes(t)&&(t=Q);var a,i=(a=e.dimensions,Object.values(a).reduce((function(e,t){return e+t}),0)),o=[-i,i],r=Object(s.a)(Object(s.a)({},ee.xaxis),{},{range:o}),c=Object(s.a)(Object(s.a)({},ee.yaxis),{},{range:o}),l=Object(s.a)(Object(s.a)({},ee.zaxis),{},{range:[-10,2*i-10]}),u=Object(s.a)(Object(s.a)({},ee),{},{xaxis:r,yaxis:c,zaxis:l,camera:t});return[n,Object(s.a)(Object(s.a)({},te),{},{scene:u})]},Re=n(48),Ue=n(21),qe=n(49),Ke="Dimensions",Xe="Inverse Kinematics",Ye="Forward Kinematics",Ze="Leg Patterns",Je="Root",$e="Walking Gaits",Qe="/inverse-kinematics",et="/forward-kinematics",tt="/leg-patterns",nt="/",at="/walking-gaits",it=["alpha","beta","gamma"],ot=["front","side","middle","coxia","femur","tibia"],rt=["leftFront","rightFront","leftMiddle","rightMiddle","leftBack","rightBack"],st=["tx","ty","tz","rx","ry","rz","hipStance","legStance"],ct=["hipSwing","liftSwing","legStance","hipStance","tx","tz","rx","ry","stepCount"],lt=function(e){return{minVal:-e,maxVal:e,stepVal:.01}},ut={30:lt(30),45:lt(45),60:lt(60),90:lt(90),180:lt(180)},ht={minVal:-1,maxVal:1,stepVal:.01},dt={dimensionInputs:{minVal:0,maxVal:1/0,stepVal:1},tx:ht,ty:ht,tz:ht,rx:ut[30],ry:ut[30],rz:ut[60],legStance:ut[90],hipStance:ut[60],alpha:ut[90],beta:ut[180],gamma:ut[180]},mt={tx:{minVal:-.25,maxVal:.25,stepVal:.01,defaultVal:0},tz:{minVal:-.5,maxVal:.5,stepVal:.01,defaultVal:0},rx:{minVal:-15,maxVal:15,stepVal:.5,defaultVal:0},ry:{minVal:-15,maxVal:15,stepVal:.5,defaultVal:0},legStance:{minVal:-50,maxVal:50,stepVal:.5,defaultVal:0},hipStance:{minVal:0,maxVal:40,stepVal:.5,defaultVal:20},hipSwing:{minVal:10,maxVal:40,stepVal:.5,defaultVal:25},liftSwing:{minVal:10,maxVal:70,stepVal:.5,defaultVal:40},stepCount:{minVal:3,maxVal:7,stepVal:1,defaultVal:5}},ft={mug:i.a.createElement(Re.a,{className:"vertical-align"}),circle:i.a.createElement(qe.a,{className:"small-icon"}),square:i.a.createElement(Ue.d,{className:"small-icon"}),octocat:i.a.createElement(Ue.b,{className:"vertical-align"}),check:i.a.createElement(Ue.a,{className:"vertical-align"}),times:i.a.createElement(Ue.e,{className:"vertical-align"}),home:i.a.createElement(Ue.c,{className:"vertical-align"})},gt={inverseKinematics:{path:Qe,description:Xe,icon:ft.circle},forwardKinematics:{path:et,description:Ye,icon:ft.circle},legPatterns:{path:tt,description:Ze,icon:ft.circle},landingPage:{path:nt,description:Je,icon:ft.home},walkingGaits:{path:at,description:$e,icon:ft.circle}},pt=[gt.inverseKinematics,gt.forwardKinematics,gt.legPatterns,gt.walkingGaits,gt.landingPage],vt=[{name:"REPO",icon:ft.octocat,description:"Source Code",url:"https://github.com/alex-pyasetskiy/react-hexapod-simulator"}],bt=function(e){var t=e.link,n=e.showDesc;return i.a.createElement("li",null,i.a.createElement(f.b,{to:t.path,className:"link-icon"},i.a.createElement("span",null,t.icon," ",n?t.description:null)))},yt=function(e){var t=e.path,n=e.description,a=e.icon;return i.a.createElement("li",null,i.a.createElement("a",{href:t,className:"link-icon",target:"_blank",rel:"noopener noreferrer",children:i.a.createElement("span",null,a," ",n)}))},xt=function(){return i.a.createElement("ul",{className:"row-container no-bullet",id:"top-bar"},vt.map((function(e){return i.a.createElement(yt,{path:e.url,key:"navBullet"+e.url,icon:e.icon})})),pt.map((function(e){return i.a.createElement(bt,{key:"navBullet"+e.path,link:e})})))},Pt=function(){return i.a.createElement("footer",null,i.a.createElement("nav",{id:"nav"},i.a.createElement("ul",{className:"grid-cols-1 no-bullet"},vt.map((function(e){return i.a.createElement(yt,{path:e.url,key:"navDetailed"+e.url,icon:e.icon,description:e.description})})),pt.map((function(e){return i.a.createElement(bt,{key:"navDetailed"+e.path,link:e,showDesc:!0})})))))},wt=function(){return i.a.createElement(xt,null)},Ot=n(51),kt=n.n(Ot),jt=n(52),St=n.n(jt)()(kt.a),Et=function(e){var t={data:e.data,layout:e.layout,onRelayout:e.onRelayout,revision:e.revision,config:{displaylogo:!1,responsive:!0},style:{height:"100%",width:"100%"},useResizeHandler:!0};return i.a.createElement(St,t)},Tt=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={message:null},a.myRef=i.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({message:null})}},{key:"handleChange",value:function(e){var t=this.props.rangeParams,n=t.minVal,a=t.maxVal,i=t.stepVal,o=this.myRef.current.validity;if(o.badInput)this.setState({message:"NaN"});else if(o.rangeOverflow)this.setState({message:"max=".concat(a)});else if(o.rangeUnderflow)this.setState({message:"min=".concat(n)});else if(o.stepMismatch)this.setState({message:"step=".concat(i)});else if(this.myRef.current.checkValidity()){var r=parseFloat(e);isNaN(r)?this.setState({message:"NaN"}):(this.setState({message:null}),this.props.handleChange(this.props.name,r))}else this.setState({message:"Error"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.rangeParams,o=t.id,r=t.value,s=o||n,c=a.minVal,l=a.maxVal,u=a.stepVal,h={type:"number",input:"numeric",id:s,ref:this.myRef,value:r,min:c,max:l,step:u,style:{margin:0}};return i.a.createElement("div",null,i.a.createElement("label",{htmlFor:s,className:"label"},n),i.a.createElement("input",Object.assign({},h,{onChange:function(t){return e.handleChange(t.target.value)}})),i.a.createElement("label",{className:"label red",style:{opacity:1}},this.state.message))}}]),n}(a.Component),zt=n(20),Mt=n.n(zt),Nt=function(e){var t=e.info;return i.a.createElement("div",{className:"message"},i.a.createElement("h2",{className:"red"},ft.times," ",t.subject),i.a.createElement(Mt.a,{source:t.body}))},Ft=function(e){var t=e.id,n=e.value,a=e.handleChange,o=e.showValue;return i.a.createElement("div",{className:"switch-container"},i.a.createElement("label",{className:"switch",htmlFor:t},i.a.createElement("input",{id:t,type:"checkbox",value:n,onChange:a}),i.a.createElement("span",{className:"toggle-switch-widget round"})),i.a.createElement("label",{className:"label",htmlFor:t},o?n:null))},Ct=function(e){var t=e.title,n=e.other,a=e.children;return i.a.createElement("div",null,i.a.createElement("div",{className:"row-container flex-wrap"},t,n),a)},At=function(e){var t=e.handleClick,n=e.children;return i.a.createElement("button",{type:"button",className:"button",onClick:t},n)},Lt=function(e){var t=e.reset;return i.a.createElement(At,{handleClick:t},"reset")},Vt=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).sectionName=Ke,e.state={isFine:!0},e.reset=function(){return e.props.onUpdate(K)},e.toggleMode=function(){return e.setState({isFine:!e.state.isFine})},e.updateFieldState=function(t,n){return e.updateDimensions(t,n)},e.updateDimensions=function(t,n){var a=Object(s.a)(Object(s.a)({},e.props.params.dimensions),{},Object(Ee.a)({},t,n));e.props.onUpdate(a)},e.render=function(){return i.a.createElement(Ct,{title:i.a.createElement("h2",null,e.sectionName),other:e.toggleSwitch},e.NumberInputFields,i.a.createElement(Lt,{reset:e.reset}))},e}return Object(u.a)(n,[{key:"toggleSwitch",get:function(){var e={id:"DimensionsWidgetSwitch",value:this.state.isFine?"1x":"5x",handleChange:this.toggleMode,showValue:!0};return i.a.createElement(Ft,e)}},{key:"NumberInputFields",get:function(){var e=this,t=dt.dimensionInputs,n=t.minVal,a=t.maxVal,o=this.state.isFine?1:5,r=this.props.params.dimensions,s=ot.map((function(t){var s={name:t,value:r[t],rangeParams:{minVal:n,maxVal:a,stepVal:o},handleChange:e.updateFieldState};return i.a.createElement(Tt,Object.assign({},s,{key:t}))}));return i.a.createElement("div",{className:"grid-cols-6"},s)}}]),n}(a.Component),_t=n(53),Gt=function(e){var t=e.name,n=e.id,a=e.value,o=e.rangeParams,r=e.handleChange;return i.a.createElement("div",{className:"slider-container cell"},i.a.createElement("div",{className:"label"},i.a.createElement("label",{htmlFor:n||t},t),": ",i.a.createElement("span",null,a)),i.a.createElement("input",{type:"range",id:n||t,min:o.minVal,max:o.maxVal,step:o.stepVal,value:a,onChange:function(e){return r(t,e.target.value)},className:"slider"}))},Bt=function(e){var t=e.names,n=e.values,a=e.handleChange,o=e.rangeParams;return t.map((function(e){return i.a.createElement(Gt,{key:e,name:e,rangeParams:o?o[e]:dt[e],handleChange:a,value:n[e]})}))},Wt=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).updateFieldState=function(t,n){var a=Number(n);isNaN(a)||e.props.onUpdate(e.props.name,t,a)},e.fields=function(t){return it.map((function(n){var a="".concat(e.props.name,"-").concat(n),o={id:a,name:n,key:a,value:e.props.pose[n],rangeParams:dt[n],handleChange:e.updateFieldState};return i.a.createElement(t,o)}))},e.render=function(){return i.a.createElement(Ct,{title:i.a.createElement("h3",null,e.props.name)},i.a.createElement("div",{className:e.props.renderStacked?"grid-cols-1":"grid-cols-3"},e.fields(e.props.WidgetType)))},e}return n}(a.Component),Dt=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=Ye,e.state={WidgetType:Tt},e.componentDidMount=function(){return e.props.onMount(e.pageName)},e.reset=function(){return e.props.onUpdate(X)},e.updatePose=function(t,n,a){var i=e.props.params.pose,o=Object(s.a)(Object(s.a)({},i),{},Object(Ee.a)({},t,Object(s.a)(Object(s.a)({},i[t]),{},Object(Ee.a)({},n,a))));e.props.onUpdate(o)},e.toggleMode=function(){var t=e.state.WidgetType===Gt?Tt:Gt;e.setState({WidgetType:t})},e.legPoseWidget=function(t){return i.a.createElement(Wt,{key:t,name:t,pose:e.props.params.pose[t],onUpdate:e.updatePose,WidgetType:e.state.WidgetType,renderStacked:e.state.WidgetType===Gt})},e.render=function(){return i.a.createElement(Ct,{title:i.a.createElement("h2",null,e.pageName),other:e.toggleSwitch},i.a.createElement("div",{className:"grid-cols-2"},rt.map((function(t){return e.legPoseWidget(t)}))),i.a.createElement(Lt,{reset:e.reset}))},e}return Object(u.a)(n,[{key:"toggleSwitch",get:function(){var e={id:"FwdKinematicsSwitch",value:Object(_t.renderToString)(this.state.WidgetType),handleChange:this.toggleMode,showValue:!1};return i.a.createElement(Ft,e)}}]),n}(a.Component),It={rightMiddle:"rm",rightFront:"rf",leftFront:"lf",leftMiddle:"lm",leftBack:"lb",rightBack:"rb"},Ht=function(e){var t=function(e){return b.reduce((function(t,n){var a=It[n],i=e[n],o=i.alpha,r=i.beta,s=i.gamma;return t[a]={alpha:Number(o).toFixed(2),beta:Number(r).toFixed(2),gamma:Number(s).toFixed(2)},t}),{})}(e.pose),n=function(e){var t=e.rm,n=e.rf,a=e.lf,i=e.lm,o=e.lb,r=e.rb;return"\n\n| POSITION    | ALPHA       | BETA        | GAMMA       |\n|-------------|:-----------:|:-----------:|:-----------:|\n| rightMiddle | ".concat(t.alpha," | ").concat(t.beta,"  | ").concat(t.gamma," |\n| rightFront  | ").concat(n.alpha," | ").concat(n.beta,"  | ").concat(n.gamma," |\n| leftFront   | ").concat(a.alpha," | ").concat(a.beta,"  | ").concat(a.gamma," |\n| leftMiddle  | ").concat(i.alpha," | ").concat(i.beta,"  | ").concat(i.gamma," |\n| leftBack    | ").concat(o.alpha," | ").concat(o.beta,"  | ").concat(o.gamma," |\n| rightBack   | ").concat(r.alpha," | ").concat(r.beta,"  | ").concat(r.gamma," |\n\n")}({rm:t.rm,rf:t.rf,lf:t.lf,lm:t.lm,lb:t.lb,rb:t.rb});return i.a.createElement("div",{className:"table-container"},i.a.createElement(Mt.a,{source:n}))},Rt=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=Xe,e.state={ikParams:Z,errorMessage:null},e.componentDidMount=function(){return e.props.onMount(e.pageName)},e.reset=function(){var t=Ie(e.props.params.dimensions,Z);e.updateHexapodPlot(t.hexapod,Z)},e.updateHexapodPlot=function(t,n){e.setState({ikParams:n,errorMessage:null}),e.props.onUpdate(t)},e.updateIkParams=function(t,n){var a=Object(s.a)(Object(s.a)({},e.state.ikParams),{},Object(Ee.a)({},t,n)),i=Ie(e.props.params.dimensions,a);if(!i.obtainedSolution)return e.props.onUpdate(null),void e.setState({errorMessage:i.message});e.updateHexapodPlot(i.hexapod,a)},e.render=function(){return i.a.createElement(Ct,{title:i.a.createElement("h2",null,e.pageName)},i.a.createElement("div",{className:"grid-cols-3"},e.sliders.slice(0,6)),i.a.createElement("div",{className:"grid-cols-2"},e.sliders.slice(6,8)),i.a.createElement(Lt,{reset:e.reset}),e.additionalInfo)},e}return Object(u.a)(n,[{key:"sliders",get:function(){return Bt({names:st,values:this.state.ikParams,handleChange:this.updateIkParams})}},{key:"additionalInfo",get:function(){return this.state.errorMessage?i.a.createElement(Nt,{info:this.state.errorMessage}):i.a.createElement(Ht,{pose:this.props.params.pose})}}]),n}(a.Component),Ut=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=Je,e.componentDidMount=function(){return e.props.onMount(e.pageName)},e.render=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"hexapod-img"})," ",i.a.createElement("div",{id:"landing"},i.a.createElement(Mt.a,{source:"# Hexapod Robot Simulator"})),i.a.createElement(Pt,null))},e}return n}(i.a.Component),qt=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).pageName=Ze,e.state={patternParams:Y},e.componentDidMount=function(){e.props.onMount(e.pageName),e.reset()},e.reset=function(){e.props.onUpdate(X),e.setState({patternParams:Y})},e.updatePatternPose=function(t,n){var a=Object(s.a)(Object(s.a)({},e.state.patternParams),{},Object(Ee.a)({},t,Number(n))),i={};for(var o in X)i[o]=a;e.props.onUpdate(i),e.setState({patternParams:a})},e.render=function(){return i.a.createElement(Ct,{title:i.a.createElement("h2",null,e.pageName)},i.a.createElement("div",{className:"grid-cols-1"},e.sliders),i.a.createElement(Lt,{reset:e.reset}))},e}return Object(u.a)(n,[{key:"sliders",get:function(){return Bt({names:it,values:this.state.patternParams,handleChange:this.updatePatternPose})}}]),n}(a.Component),Kt=function(e,t,n,a,i){var o=Qt(e,t,n,a,i),r=o.forwardAlphaSeqs,c=o.liftBetaSeqs,l=o.liftGammaSeqs,u=2*a,h=Xt(r,l,c,u),d=Yt(r,l,c,u);return Object(s.a)(Object(s.a)({},h),d)},Xt=function(e,t,n,a){return["leftFront","rightMiddle","leftBack"].reduce((function(i,o){var r=e[o],s=t[o],c=n[o],l=[].concat(Object(ne.a)(s),Object(ne.a)(s.slice().reverse()),Object(ne.a)(an(s[0],a))),u=[].concat(Object(ne.a)(c),Object(ne.a)(c.slice().reverse()),Object(ne.a)(an(c[0],a)));return i[o]={alpha:[].concat(Object(ne.a)(r),Object(ne.a)(r.slice().reverse())),gamma:l,beta:u},i}),{})},Yt=function(e,t,n,a){return["rightFront","leftMiddle","rightBack"].reduce((function(i,o){var r=e[o],s=t[o],c=n[o],l=[].concat(Object(ne.a)(an(s[0],a)),Object(ne.a)(s),Object(ne.a)(s.slice().reverse())),u=[].concat(Object(ne.a)(an(c[0],a)),Object(ne.a)(c),Object(ne.a)(c.slice().reverse()));return i[o]={alpha:[].concat(Object(ne.a)(r.slice().reverse()),Object(ne.a)(r)),gamma:l,beta:u},i}),{})},Zt=function(e,t,n,a){var i=Object.keys(e),o={};return i.forEach((function(i){var r=e[i],s=r.alpha,c=r.beta,l=r.gamma,u=en(c,t,a),h=en(l,-t/2,a),d=n[i],m=en(s-d,d,a),f=en(s,d,a),g=d/2,p=en(s+d,-g,a),v=en(s+g,-g,a),b=en(s,-g,a),y=en(s-g,-g,a);o[i]=Jt(i,u,h,m,f,p,v,b,y)})),o},Jt=function(e,t,n,a,i,o,r,s,c){var l=a.length,u=n.slice().reverse(),h=t.slice().reverse(),d=t[0],m=n[0],f=an(d,l),g=an(m,l),p=[t,h,f,f,f,f],v=[n,u,g,g,g,g],b={leftBack:0,rightFront:1,leftMiddle:2,rightBack:3,leftFront:4,rightMiddle:5};return{alpha:$t(b[e],[a,i,o,r,s,c]),beta:$t(b[e],p),gamma:$t(b[e],v)}},$t=function(e,t){return[].concat(Object(ne.a)(t),Object(ne.a)(t)).slice(e,e+6).flat()},Qt=function(e,t,n,a,i){var o=2*a,r=Object.keys(e),s={},c={},l={};return r.forEach((function(i){var r=e[i],u=r.alpha,h=r.beta,d=r.gamma,m=n[i];s[i]=en(u-m,2*m,o),c[i]=en(h,t,a),l[i]=en(d,-t/2,a)})),{forwardAlphaSeqs:s,liftBetaSeqs:c,liftGammaSeqs:l}},en=function(e,t,n){for(var a=t/n,i=e,o=[],r=0;r<n;r++)i+=a,o.push(i);return o},tn=function(e){return{leftFront:-e,rightMiddle:e,leftBack:-e,rightFront:e,leftMiddle:-e,rightBack:e}},nn=function(e){return{leftFront:e,rightMiddle:e,leftBack:e,rightFront:e,leftMiddle:e,rightBack:e}},an=function(e,t){if(0===t)return[];for(var n=[e];2*n.length<=t;)n=n.concat(n);return n.length<t&&(n=n.concat(n.slice(0,t-n.length))),n},on=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tx:0,tz:0,rx:0,ry:0,legStance:0,hipStance:25,stepCount:5,hipSwing:25,liftSwing:40},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tripod",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"walking",i=t.hipStance,o=t.rx,r=t.ry,s=t.tx,l=t.tz,u=t.legStance,h={tx:s,ty:0,tz:l,legStance:u,hipStance:i,rx:o,ry:r,rz:0},d=_e(e,h,!0),m=Object(c.a)(d,1),f=m[0];if(!f.foundSolution||f.hasLegsOffGround)return null;var g=t.hipSwing,p=t.liftSwing,v=t.stepCount,b=[Math.abs(g),Math.abs(p)],y=b[0],x=b[1],P="rotating"===a?nn(y):tn(y);return"ripple"===n?Zt(f.pose,x,P,v):Kt(f.pose,x,P,v)},rn=function(e,t){return Object.keys(e).reduce((function(n,a){var i=e[a],o=i.alpha,r=i.beta,s=i.gamma;return n[a]={alpha:o[t],beta:r[t],gamma:s[t]},n}),{})},sn=function(e,t,n){return i.a.createElement(Ft,{id:e,handleChange:n,value:t,showValue:!0})},cn=function(e,t,n){return i.a.createElement("div",{className:"grid-cols-3",style:{paddingBottom:"20px"}},e,t,n)},ln=function(e){return e.leftMiddle.alpha.length},un=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).pageName=$e,e.currentTwist=0,e.walkSequence=null,e.state={gaitParams:J,isAnimating:!1,isTripodGait:!0,isForward:!0,inWalkMode:!0,showGaitWidgets:!0,animationCount:0},e.componentDidMount=function(){e.props.onMount(e.pageName);var t=e.state,n=t.isTripodGait,a=t.inWalkMode;e.setWalkSequence(J,n,a)},e.componentWillUnmount=function(){clearInterval(e.intervalID)},e.animate=function(){var t=e.state,n=t.isForward,a=t.inWalkMode,i=ln(e.walkSequence),o=(e.state.animationCount+1)%i;e.setState({animationCount:o});var r=n?o:i-o,s=Math.max(0,Math.min(i-1,r)),c=rn(e.walkSequence,s);if(a)e.onUpdate(c,e.currentTwist);else{var l=2*e.state.gaitParams.hipSwing/i,u=n?(e.currentTwist+l)%360:(e.currentTwist-l)%360;e.onUpdate(c,u)}},e.onUpdate=function(t,n){e.currentTwist=n;var a=e.props.params.dimensions,i=new Se(a,t,{wontRotate:!0});if(i&&i.body){var o=R(n);e.props.onUpdate(i.cloneTrot(o))}},e.setWalkSequence=function(t,n,a){var i=n?"tripod":"ripple",o=a?"walking":"rotating",r=e.props.params.dimensions,s=e.state.animationCount;e.walkSequence=on(r,t,i,o)||e.walkSequence;var c=rn(e.walkSequence,s);e.onUpdate(c,e.currentTwist),e.setState({gaitParams:t,isTripodGait:n,inWalkMode:a})},e.reset=function(){var t=e.state,n=t.isTripodGait,a=t.inWalkMode;e.currentTwist=0,e.setWalkSequence(J,n,a)},e.updateGaitParams=function(t,n){var a=e.state,i=a.isTripodGait,o=a.inWalkMode,r=Object(s.a)(Object(s.a)({},e.state.gaitParams),{},Object(Ee.a)({},t,n));e.setWalkSequence(r,i,o)},e.toggleWalkMode=function(){var t=e.state,n=t.gaitParams,a=t.isTripodGait,i=!e.state.inWalkMode;e.setWalkSequence(n,a,i)},e.toggleGaitType=function(){var t=e.state,n=t.gaitParams,a=t.inWalkMode,i=!e.state.isTripodGait;e.setWalkSequence(n,i,a)},e.toggleWidgets=function(){return e.setState({showGaitWidgets:!e.state.showGaitWidgets})},e.toggleDirection=function(){return e.setState({isForward:!e.state.isForward})},e.toggleAnimating=function(){var t=!e.state.isAnimating;e.setState({isAnimating:t}),t?e.intervalID=setInterval(e.animate,10):clearInterval(e.intervalID)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=cn(this.animatingSwitch,this.widgetsSwitch),t=cn(this.gaitTypeSwitch,this.directionSwitch,this.rotateSwitch),n=this.state.showGaitWidgets,a=this.props.params.pose;return i.a.createElement(Ct,{title:i.a.createElement("h2",null,this.pageName),other:this.animationCount},e,i.a.createElement("div",{hidden:!n},t,this.sliders,i.a.createElement(Lt,{reset:this.reset})),i.a.createElement("div",{hidden:n},i.a.createElement(Ht,{pose:a})))}},{key:"widgetsSwitch",get:function(){var e=this.state.showGaitWidgets?"controlsShown":"poseShown";return sn("widgetSw",e,this.toggleWidgets)}},{key:"animatingSwitch",get:function(){var e=this.state.isAnimating?"PLAYING...":"...PAUSED. ";return sn("animatingSw",e,this.toggleAnimating)}},{key:"gaitTypeSwitch",get:function(){var e=this.state.isTripodGait?"tripodGait":"rippleGait";return sn("gaitSw",e,this.toggleGaitType)}},{key:"directionSwitch",get:function(){var e=this.state.isForward?"isForward":"isBackward";return sn("directionSw",e,this.toggleDirection)}},{key:"rotateSwitch",get:function(){var e=this.state.inWalkMode?"isWalk":"isRotate";return sn("rotateSw",e,this.toggleWalkMode)}},{key:"sliders",get:function(){var e=Bt({names:ct,values:this.state.gaitParams,rangeParams:mt,handleChange:this.updateGaitParams});return i.a.createElement("div",{className:"grid-cols-2"},e)}},{key:"animationCount",get:function(){var e=this.state,t=e.isAnimating,n=e.animationCount;return i.a.createElement("div",{className:"text",hidden:!t},n)}}]),n}(a.Component);g.a.initialize("UA-170794768-1",{debug:!0,testMode:!1,gaOptions:{siteSpeedSampleRate:100}});var hn=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).plot={cameraView:Q,data:$,layout:te},e.state={inHexapodPage:!1,hexapodDimensions:K,hexapodPose:X,revision:0},e.onPageLoad=function(t){g.a.pageview(window.location.pathname+window.location.search),t!==Je?(e.setState({inHexapodPage:!0}),e.updatePlot(e.state.hexapodDimensions,X)):e.setState({inHexapodPage:!1})},e.updatePlotWithHexapod=function(t){if(t&&t.foundSolution){var n=He(t,e.plot.cameraView),a=Object(c.a)(n,2),i=a[0],o=a[1];e.plot=Object(s.a)(Object(s.a)({},e.plot),{},{data:i,layout:o}),e.setState({revision:e.state.revision+1,hexapodDimensions:t.dimensions,hexapodPose:t.pose})}},e.logCameraView=function(t){e.plot.cameraView=t["scene.camera"]},e.updatePlot=function(t,n){var a=new Se(t,n);e.updatePlotWithHexapod(a)},e.updateDimensions=function(t){return e.updatePlot(t,e.state.hexapodPose)},e.updatePose=function(t){return e.updatePlot(e.state.hexapodDimensions,t)},e.hexapodPlot=function(){var t=e.state,n=t.revision,a=t.inHexapodPage,o=e.plot,r={data:o.data,layout:o.layout,revision:n,onRelayout:e.logCameraView};return i.a.createElement("div",{hidden:!a,className:"plot border"},i.a.createElement(Et,r))},e.dimensions=function(){return i.a.createElement("div",{hidden:!e.state.inHexapodPage},i.a.createElement(Vt,{params:{dimensions:e.state.hexapodDimensions},onUpdate:e.updateDimensions}))},e.navDetailed=function(){return i.a.createElement("div",{hidden:!e.state.inHexapodPage},i.a.createElement(Pt,null))},e.pageComponent=function(t,n,a){return i.a.createElement(t,{onMount:e.onPageLoad,onUpdate:n,params:a})},e.pageLanding=function(){return e.pageComponent(Ut)},e.pagePatterns=function(){return e.pageComponent(qt,e.updatePose)},e.pageIk=function(){return e.pageComponent(Rt,e.updatePlotWithHexapod,e.hexapodParams)},e.pageFk=function(){return e.pageComponent(Dt,e.updatePose,{pose:e.state.hexapodPose})},e.pageWalking=function(){return e.pageComponent(un,e.updatePlotWithHexapod,e.hexapodParams)},e.page=function(){return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/",exact:!0,component:e.pageLanding}),i.a.createElement(m.b,{path:gt.legPatterns.path,exact:!0,component:e.pagePatterns}),i.a.createElement(m.b,{path:gt.forwardKinematics.path,exact:!0,component:e.pageFk}),i.a.createElement(m.b,{path:gt.inverseKinematics.path,exact:!0,component:e.pageIk}),i.a.createElement(m.b,{path:gt.walkingGaits.path,exact:!0,component:e.pageWalking}),i.a.createElement(m.b,null,i.a.createElement(m.a,{to:"/"})))},e.render=function(){return i.a.createElement(f.a,null,i.a.createElement(wt,null),i.a.createElement("div",{className:"main content"},i.a.createElement("div",{className:"sidebar column-container cell"},e.dimensions(),e.page()),e.hexapodPlot()),e.navDetailed())},e}return Object(u.a)(n,[{key:"hexapodParams",get:function(){return{dimensions:this.state.hexapodDimensions,pose:this.state.hexapodPose}}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(hn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports=n(145)},59:function(e,t,n){}},[[54,1,2]]]);
//# sourceMappingURL=main.e4a5fc7a.chunk.js.map